<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visualisation Gallery • brolgar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Visualisation Gallery">
<meta property="og:description" content="brolgar">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brolgar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.6.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/getting-started.html">Getting Started</a>
</li>
<li>
  <a href="../articles/visualisation-gallery.html">Gallery</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/longitudinal-data-structures.html">Data Structures</a>
    </li>
    <li>
      <a href="../articles/exploratory-modelling.html">Exploratory Modelling</a>
    </li>
    <li>
      <a href="../articles/finding-features.html">Finding Features</a>
    </li>
    <li>
      <a href="../articles/id-interesting-obs.html">Identify Interesting Observations</a>
    </li>
    <li>
      <a href="../articles/mixed-effects-models.html">Exploring Mixed Effects Models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/njtierney/brolgar/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Visualisation Gallery</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/njtierney/brolgar/blob/master/vignettes/visualisation-gallery.Rmd"><code>vignettes/visualisation-gallery.Rmd</code></a></small>
      <div class="hidden name"><code>visualisation-gallery.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/njtierney/brolgar">brolgar</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span>)
</pre></div>
<p><code>brolgar</code> explores two ways to explore the data, first exploring the raw data, then exploring the data using summaries. This vignette displays a variety of ways to explore your data around these two ideas.</p>
<div id="exploring-raw-data" class="section level1">
<h1 class="hasAnchor">
<a href="#exploring-raw-data" class="anchor"></a>Exploring raw data</h1>
<p>When you first receive your data, you want to look at as much raw data as possible. This section discusses a few techniques to make it more palatable to explore your raw data without getting too much overplotting.</p>
<div id="select-a-sample-of-individuals" class="section level2">
<h2 class="hasAnchor">
<a href="#select-a-sample-of-individuals" class="anchor"></a>Select a sample of individuals</h2>
<p>Sample n random individuals to explore (Note: Possibly not representative)</p>
<p>For example, we can sample 20 random individuals, and then plot them. (perhaps change <code>sample_n_keys</code> into <code>sample_id</code>.)</p>
<div class="sourceCode" id="cb2"><pre class="downlit">

<span class="kw">wages</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/sample-n-frac-keys.html">sample_n_keys</a></span>(size = <span class="fl">20</span>)
<span class="co">#&gt; # A tsibble: 147 x 9 [!]</span>
<span class="co">#&gt; # Key:       id [20]</span>
<span class="co">#&gt;       id ln_wages    xp   ged xp_since_ged black hispanic high_grade</span>
<span class="co">#&gt;    &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;        &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;</span>
<span class="co">#&gt;  1  9290     1.46 0.412     0            0     0        1          8</span>
<span class="co">#&gt;  2  9290     1.66 0.824     0            0     0        1          8</span>
<span class="co">#&gt;  3  9290     1.57 0.884     0            0     0        1          8</span>
<span class="co">#&gt;  4  9290     2.11 1.9       0            0     0        1          8</span>
<span class="co">#&gt;  5  9290     1.84 2.26      0            0     0        1          8</span>
<span class="co">#&gt;  6  9290     1.66 2.34      0            0     0        1          8</span>
<span class="co">#&gt;  7  9853     1.76 0.463     0            0     0        1         10</span>
<span class="co">#&gt;  8  9853     1.89 0.579     0            0     0        1         10</span>
<span class="co">#&gt;  9  9853     1.86 1.16      0            0     0        1         10</span>
<span class="co">#&gt; 10  9853     1.88 2.22      0            0     0        1         10</span>
<span class="co">#&gt; # … with 137 more rows, and 1 more variable: unemploy_rate &lt;dbl&gt;</span>

<span class="kw">wages</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/sample-n-frac-keys.html">sample_n_keys</a></span>(size = <span class="fl">20</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">xp</span>,
             y = <span class="kw">ln_wages</span>,
             group = <span class="kw">id</span>)) <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>()
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/selected-sample-1.png" width="700"></p>
</div>
<div id="filter-only-those-with-certain-number-of-observations" class="section level2">
<h2 class="hasAnchor">
<a href="#filter-only-those-with-certain-number-of-observations" class="anchor"></a>Filter only those with certain number of observations</h2>
<p>There was a variety of the number of observations in the data - some with only a few, and some with many. We can filter by the number of the observations in the data using <code><a href="../reference/add_n_obs.html">add_n_obs()</a></code>, which adds a new column, <code>n_obs</code>, the number of observations for each key.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="kw">wages</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_n_obs.html">add_n_obs</a></span>()
<span class="co">#&gt; # A tsibble: 6,402 x 10 [!]</span>
<span class="co">#&gt; # Key:       id [888]</span>
<span class="co">#&gt;       id    xp n_obs ln_wages   ged xp_since_ged black hispanic high_grade</span>
<span class="co">#&gt;    &lt;int&gt; &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt; &lt;int&gt;        &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;</span>
<span class="co">#&gt;  1    31 0.015     8     1.49     1        0.015     0        1          8</span>
<span class="co">#&gt;  2    31 0.715     8     1.43     1        0.715     0        1          8</span>
<span class="co">#&gt;  3    31 1.73      8     1.47     1        1.73      0        1          8</span>
<span class="co">#&gt;  4    31 2.77      8     1.75     1        2.77      0        1          8</span>
<span class="co">#&gt;  5    31 3.93      8     1.93     1        3.93      0        1          8</span>
<span class="co">#&gt;  6    31 4.95      8     1.71     1        4.95      0        1          8</span>
<span class="co">#&gt;  7    31 5.96      8     2.09     1        5.96      0        1          8</span>
<span class="co">#&gt;  8    31 6.98      8     2.13     1        6.98      0        1          8</span>
<span class="co">#&gt;  9    36 0.315    10     1.98     1        0.315     0        0          9</span>
<span class="co">#&gt; 10    36 0.983    10     1.80     1        0.983     0        0          9</span>
<span class="co">#&gt; # … with 6,392 more rows, and 1 more variable: unemploy_rate &lt;dbl&gt;</span>
</pre></div>
<p>We can then filter our data based on the number of observations, and combine this with the previous steps to sample the data using <code><a href="../reference/sample-n-frac-keys.html">sample_n_keys()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org">dplyr</a></span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
<span class="kw">wages</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_n_obs.html">add_n_obs</a></span>() <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">n_obs</span> <span class="op">&gt;=</span> <span class="fl">5</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/sample-n-frac-keys.html">sample_n_keys</a></span>(size = <span class="fl">20</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">xp</span>,
             y = <span class="kw">ln_wages</span>,
             group = <span class="kw">id</span>)) <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>()
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/filter-sample-1.png" width="700"></p>
</div>
<div id="clever-facets-facet_strata" class="section level2">
<h2 class="hasAnchor">
<a href="#clever-facets-facet_strata" class="anchor"></a>Clever facets: <code>facet_strata</code>
</h2>
<p><code>brolgar</code> provides some clever facets to help make it easier to explore your data. <code><a href="../reference/facet_strata.html">facet_strata()</a></code> splits the data into 12 groups by default:</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">2019</span><span class="op">-</span><span class="fl">07</span><span class="op">-</span><span class="fl">23</span><span class="op">-</span><span class="fl">1936</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span>)
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">wages</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">xp</span>,
           y = <span class="kw">ln_wages</span>,
           group = <span class="kw">id</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() <span class="op">+</span>
  <span class="fu"><a href="../reference/facet_strata.html">facet_strata</a></span>()
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/facet-strata-1.png" width="700"></p>
<p>You can control the number with <code>n_strata</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">2019</span><span class="op">-</span><span class="fl">07</span><span class="op">-</span><span class="fl">23</span><span class="op">-</span><span class="fl">1936</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span>)
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">wages</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">xp</span>,
           y = <span class="kw">ln_wages</span>,
           group = <span class="kw">id</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() <span class="op">+</span>
  <span class="fu"><a href="../reference/facet_strata.html">facet_strata</a></span>(n_strata = <span class="fl">6</span>)
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/facet-strata-options-1.png" width="700"></p>
<p>And have your regular control with other facet options:</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">2019</span><span class="op">-</span><span class="fl">07</span><span class="op">-</span><span class="fl">23</span><span class="op">-</span><span class="fl">1936</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span>)
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">wages</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">xp</span>,
           y = <span class="kw">ln_wages</span>,
           group = <span class="kw">id</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() <span class="op">+</span>
  <span class="fu"><a href="../reference/facet_strata.html">facet_strata</a></span>(n_strata = <span class="fl">6</span>,
               nrow = <span class="fl">3</span>,
               ncol = <span class="fl">2</span>)
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/facet-strata-nrow-ncol-1.png" width="700"></p>
</div>
<div id="clever-facets-facet_sample" class="section level2">
<h2 class="hasAnchor">
<a href="#clever-facets-facet_sample" class="anchor"></a>Clever facets: <code>facet_sample</code>
</h2>
<p><code><a href="../reference/facet_sample.html">facet_sample()</a></code> allows you to specify a number of samples per plot with, “n per plot” and the number of facets to show with “n facets”. By default it splits the data into 12 facets with 3 per group:</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">2019</span><span class="op">-</span><span class="fl">07</span><span class="op">-</span><span class="fl">23</span><span class="op">-</span><span class="fl">1937</span>)
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">wages</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">xp</span>,
           y = <span class="kw">ln_wages</span>,
           group = <span class="kw">id</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() <span class="op">+</span>
  <span class="fu"><a href="../reference/facet_sample.html">facet_sample</a></span>()
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/facet-sample-1.png" width="700"></p>
<p>This allows for you to look at a larger sample of the data.</p>
</div>
<div id="clever-facets-with-number-of-observations" class="section level2">
<h2 class="hasAnchor">
<a href="#clever-facets-with-number-of-observations" class="anchor"></a>Clever facets with number of observations</h2>
<p>We can combine <code><a href="../reference/add_n_obs.html">add_n_obs()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> to show only series which have only 5 or more observations:</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">2019</span><span class="op">-</span><span class="fl">07</span><span class="op">-</span><span class="fl">23</span><span class="op">-</span><span class="fl">1937</span>)
<span class="kw">wages</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_n_obs.html">add_n_obs</a></span>() <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">n_obs</span> <span class="op">&gt;=</span> <span class="fl">5</span>) <span class="op">%&gt;%</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">xp</span>,
           y = <span class="kw">ln_wages</span>,
           group = <span class="kw">id</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() <span class="op">+</span>
  <span class="fu"><a href="../reference/facet_sample.html">facet_sample</a></span>()
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/facet-sample-n-obs-1.png" width="700"></p>
<p>These approaches allow you to view large sections of the raw data, but it does not point out individuals that are “interesting”, in the sense of those being outliers, or representative of the middle of the group.</p>
</div>
</div>
<div id="exploring-data-using-features" class="section level1">
<h1 class="hasAnchor">
<a href="#exploring-data-using-features" class="anchor"></a>Exploring data using features</h1>
<p>You can plot the features of the data by first identifying features of interest and then joining them back to the data. For a more details explanation of this, see the vignette, <a href="articles/finding-features.html">Finding Features</a>.</p>
<div id="plot-monotonic-individual-series" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-monotonic-individual-series" class="anchor"></a>Plot monotonic individual series</h2>
<p>In this example, we will plot those whose values only increase or decrease with <code>feat_monotonic</code> and <code>gghighlight</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/yutannihilation/gghighlight">gghighlight</a></span>)
<span class="kw">wages</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html">features</a></span>(<span class="kw">ln_wages</span>, <span class="kw">feat_monotonic</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(<span class="kw">wages</span>, by = <span class="st">"id"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">xp</span>,
             y = <span class="kw">ln_wages</span>,
             group = <span class="kw">id</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() <span class="op">+</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/gghighlight/man/gghighlight.html">gghighlight</a></span>(<span class="kw">increase</span>)
<span class="co">#&gt; Warning: Tried to calculate with group_by(), but the calculation failed.</span>
<span class="co">#&gt; Falling back to ungrouped filter operation...</span>
<span class="co">#&gt; label_key: id</span>
<span class="co">#&gt; Too many data series, skip labeling</span>
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/gg-high-mono-1.png" width="700"></p>
<p>You can explore the available features, see the function <a href="http://brolgar.njtierney.com/reference/index.html">References</a></p>
</div>
<div id="plot-individuals-with-negative-slope" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-individuals-with-negative-slope" class="anchor"></a>Plot individuals with negative slope</h2>
<p>We can find those individuals who have a negative slope using <code>key_slope</code>. For more detail on <code>key_slope</code>, see the <a href="">Exploratory Modelling</a> vignette.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="kw">wages</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/key_slope.html">key_slope</a></span>(<span class="kw">ln_wages</span> <span class="op">~</span> <span class="kw">xp</span>)
<span class="co">#&gt; # A tibble: 888 x 3</span>
<span class="co">#&gt;       id .intercept .slope_xp</span>
<span class="co">#&gt;    &lt;int&gt;      &lt;dbl&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt;  1    31       1.41    0.101 </span>
<span class="co">#&gt;  2    36       2.04    0.0588</span>
<span class="co">#&gt;  3    53       2.29   -0.358 </span>
<span class="co">#&gt;  4   122       1.93    0.0374</span>
<span class="co">#&gt;  5   134       2.03    0.0831</span>
<span class="co">#&gt;  6   145       1.59    0.0469</span>
<span class="co">#&gt;  7   155       1.66    0.0867</span>
<span class="co">#&gt;  8   173       1.61    0.100 </span>
<span class="co">#&gt;  9   206       1.73    0.180 </span>
<span class="co">#&gt; 10   207       1.62    0.0884</span>
<span class="co">#&gt; # … with 878 more rows</span>
</pre></div>
<p><code>key_slope</code> fits a linear model for each key, and returns a <code>tibble</code> with the <code>key</code> columns and <code>.intercept</code> and <code>.slope_&lt;varname&gt;</code>, and any other explanatory variables.</p>
<p>We can use <code>gghighlight</code> to identify individuals with an overall negative slope:</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org">dplyr</a></span>)
<span class="kw">wages_slope</span> <span class="op">&lt;-</span> <span class="kw">wages</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/key_slope.html">key_slope</a></span>(<span class="kw">ln_wages</span> <span class="op">~</span> <span class="kw">xp</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(<span class="kw">wages</span>, by = <span class="st">"id"</span>)

<span class="kw">gg_wages_slope</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">wages_slope</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">xp</span>,
           y = <span class="kw">ln_wages</span>,
           group = <span class="kw">id</span>)) <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() 

<span class="kw">gg_wages_slope</span> <span class="op">+</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/gghighlight/man/gghighlight.html">gghighlight</a></span>(<span class="kw">.slope_xp</span> <span class="op">&lt;</span> <span class="fl">0</span>)
<span class="co">#&gt; Warning: Tried to calculate with group_by(), but the calculation failed.</span>
<span class="co">#&gt; Falling back to ungrouped filter operation...</span>
<span class="co">#&gt; label_key: id</span>
<span class="co">#&gt; Too many data series, skip labeling</span>
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/wages-ts-slope-1.png" width="700"></p>
<p>With a positive slope</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="kw">gg_wages_slope</span> <span class="op">+</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/gghighlight/man/gghighlight.html">gghighlight</a></span>(<span class="kw">.slope_xp</span> <span class="op">&gt;</span> <span class="fl">0</span>)
<span class="co">#&gt; Warning: Tried to calculate with group_by(), but the calculation failed.</span>
<span class="co">#&gt; Falling back to ungrouped filter operation...</span>
<span class="co">#&gt; label_key: id</span>
<span class="co">#&gt; Too many data series, skip labeling</span>
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/wages-ts-slope-pos-1.png" width="700"></p>
<p>We could even facet by slope:</p>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="kw">gg_wages_slope</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="op">~</span><span class="kw">.slope_xp</span> <span class="op">&gt;</span> <span class="fl">0</span>)
<span class="co">#&gt; geom_path: Each group consists of only one observation. Do you need to adjust</span>
<span class="co">#&gt; the group aesthetic?</span>
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/wags-ts-slope-facet-1.png" width="700"></p>
</div>
</div>
<div id="move-along-features-with-facet_strata" class="section level1">
<h1 class="hasAnchor">
<a href="#move-along-features-with-facet_strata" class="anchor"></a>Move along features with <code>facet_strata</code>
</h1>
<div id="visualise-along-slope" class="section level2">
<h2 class="hasAnchor">
<a href="#visualise-along-slope" class="anchor"></a>Visualise along slope</h2>
<p>We can use the <code>along</code> argument of <code><a href="../reference/facet_strata.html">facet_strata()</a></code> to break the data according to some feature. The only catch is that the data passed must be a <code>tsibble</code>.</p>
<p>For example, we could break the data <code>along</code> the <code>.slope_xp</code> variable into 12 groups, which by default will be arranged in descending order. So here we have to groups broken up from most positive slope to most negative.</p>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="kw">wages_slope</span> <span class="op">&lt;-</span> <span class="kw">wages</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/key_slope.html">key_slope</a></span>(<span class="kw">ln_wages</span> <span class="op">~</span> <span class="kw">xp</span>) <span class="op">%&gt;%</span>
  <span class="co"># ensures that we keep the data as a `tsibble`</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(x = <span class="kw">wages</span>, y = <span class="kw">.</span>, by = <span class="st">"id"</span>)

<span class="kw">gg_wages_slope</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">wages_slope</span>,
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">xp</span>,
           y = <span class="kw">ln_wages</span>,
           group = <span class="kw">id</span>)) <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() 

<span class="kw">gg_wages_slope</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/facet_strata.html">facet_strata</a></span>(n_strata = <span class="fl">12</span>,
               along = <span class="kw">.slope_xp</span>)
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/strata-along-1.png" width="700"></p>
<p>We could then do this along other features of a five number summary:</p>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="kw">wages_five</span> <span class="op">&lt;-</span> <span class="kw">wages</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html">features</a></span>(<span class="kw">ln_wages</span>, <span class="kw">feat_five_num</span>) <span class="op">%&gt;%</span>
  <span class="co"># ensures that we keep the data as a `tsibble`</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span>(x = <span class="kw">wages</span>, y = <span class="kw">.</span>, by = <span class="st">"id"</span>)

<span class="kw">wages_five</span>
<span class="co">#&gt; # A tsibble: 6,402 x 14 [!]</span>
<span class="co">#&gt; # Key:       id [888]</span>
<span class="co">#&gt;       id ln_wages    xp   ged xp_since_ged black hispanic high_grade</span>
<span class="co">#&gt;    &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;        &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;</span>
<span class="co">#&gt;  1    31     1.49 0.015     1        0.015     0        1          8</span>
<span class="co">#&gt;  2    31     1.43 0.715     1        0.715     0        1          8</span>
<span class="co">#&gt;  3    31     1.47 1.73      1        1.73      0        1          8</span>
<span class="co">#&gt;  4    31     1.75 2.77      1        2.77      0        1          8</span>
<span class="co">#&gt;  5    31     1.93 3.93      1        3.93      0        1          8</span>
<span class="co">#&gt;  6    31     1.71 4.95      1        4.95      0        1          8</span>
<span class="co">#&gt;  7    31     2.09 5.96      1        5.96      0        1          8</span>
<span class="co">#&gt;  8    31     2.13 6.98      1        6.98      0        1          8</span>
<span class="co">#&gt;  9    36     1.98 0.315     1        0.315     0        0          9</span>
<span class="co">#&gt; 10    36     1.80 0.983     1        0.983     0        0          9</span>
<span class="co">#&gt; # … with 6,392 more rows, and 6 more variables: unemploy_rate &lt;dbl&gt;, min &lt;dbl&gt;,</span>
<span class="co">#&gt; #   q25 &lt;dbl&gt;, med &lt;dbl&gt;, q75 &lt;dbl&gt;, max &lt;dbl&gt;</span>
</pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="kw">gg_wages_five</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">wages_five</span>,
                         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(x = <span class="kw">xp</span>,
                             y = <span class="kw">ln_wages</span>,
                             group = <span class="kw">id</span>)) <span class="op">+</span> 
                     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() 

<span class="kw">gg_wages_five</span>
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/gg-wages-features-along-1.png" width="700"></p>
<p>We could move along the minimum:</p>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="kw">gg_wages_five</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/facet_strata.html">facet_strata</a></span>(n_strata = <span class="fl">12</span>,
               along = <span class="kw">min</span>)
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/wages-features-min-1.png" width="700"></p>
<p>We could move along the maximum:</p>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="kw">gg_wages_five</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/facet_strata.html">facet_strata</a></span>(n_strata = <span class="fl">12</span>,
               along = <span class="kw">max</span>)
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/wages-features-max-1.png" width="700"></p>
<p>We could move along the median:</p>
<div class="sourceCode" id="cb20"><pre class="downlit">
<span class="kw">gg_wages_five</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/facet_strata.html">facet_strata</a></span>(n_strata = <span class="fl">12</span>,
               along = <span class="kw">med</span>)
</pre></div>
<p><img src="visualisation-gallery_files/figure-html/wages-features-med-1.png" width="700"></p>
<p>Under the hood there needs to be some summarisation of the data to arrange it like this, details on the implementation are in the helpfile for <code><a href="../reference/facet_strata.html">?facet_strata</a></code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Nicholas Tierney, Di Cook, Tania Prvan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '48bc42eefc5234a6463c3b99e53dfda1',
    indexName: 'brolgar',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
