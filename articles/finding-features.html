<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Finding Features in Data • brolgar</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Finding Features in Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">brolgar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/getting-started.html">Getting Started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/visualisation-gallery.html">Gallery</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/longitudinal-data-structures.html">Data Structures</a></li>
    <li><a class="dropdown-item" href="../articles/exploratory-modelling.html">Exploratory Modelling</a></li>
    <li><a class="dropdown-item" href="../articles/finding-features.html">Finding Features</a></li>
    <li><a class="dropdown-item" href="../articles/id-interesting-obs.html">Identify Interesting Observations</a></li>
    <li><a class="dropdown-item" href="../articles/mixed-effects-models.html">Exploring Mixed Effects Models</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/njtierney/brolgar/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Finding Features in Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/njtierney/brolgar/blob/main/vignettes/finding-features.Rmd" class="external-link"><code>vignettes/finding-features.Rmd</code></a></small>
      <div class="d-none name"><code>finding-features.Rmd</code></div>
    </div>

    
    
<p>When you are presented with longitudinal data, it is useful to
summarise the data into a format where you have one row per key. That
means one row per unique identifier of the data - if you aren’t sure
what this means, see the vignette, <a href="https://brolgar.njtierney.com/articles/longitudinal-data-structures.html" class="external-link">“Longitudinal
Data Structures”</a>.</p>
<p>So, say for example you wanted to find features in the wages data,
which looks like this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/njtierney/brolgar" class="external-link">brolgar</a></span><span class="op">)</span></span>
<span><span class="va">wages</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tsibble: 6,402 x 9 [!]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Key:       id [888]</span></span></span>
<span><span class="co">#&gt;       id ln_wages    xp   ged xp_since_ged black hispanic high_grade</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31     1.49 0.015     1        0.015     0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    31     1.43 0.715     1        0.715     0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    31     1.47 1.73      1        1.73      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    31     1.75 2.77      1        2.77      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    31     1.93 3.93      1        3.93      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    31     1.71 4.95      1        4.95      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    31     2.09 5.96      1        5.96      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    31     2.13 6.98      1        6.98      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    36     1.98 0.315     1        0.315     0        0          9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    36     1.80 0.983     1        0.983     0        0          9</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6,392 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: unemploy_rate &lt;dbl&gt;</span></span></span></code></pre></div>
<p>You can return a dataset that has one row per key, with say the
minimum value for <code>ln_wages</code>, for each key:</p>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 888 × 2</span></span></span>
<span><span class="co">#&gt;       id   min</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31 1.43 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    36 1.80 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    53 1.54 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   122 0.763</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   134 2.00 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   145 1.48 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   155 1.54 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   173 1.56 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   206 2.03 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   207 1.58 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 878 more rows</span></span></span></code></pre>
<p>This then allows us to summarise these kinds of data, to say for
example find the distribution of minimum values:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">wages_min</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">min</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">geom_density</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="finding-features_files/figure-html/gg-min-wages-1.png" width="700"></p>
<p>We call these summaries <code>features</code> of the data.</p>
<p>This vignette discusses how to calculate these features of the
data.</p>
<div class="section level2">
<h2 id="calculating-features">Calculating features<a class="anchor" aria-label="anchor" href="#calculating-features"></a>
</h2>
<p>We can calculate <code>features</code> of longitudinal data using the
<code>features</code> function (from <a href="https://fabletools.tidyverts.org/" class="external-link"><code>fabletools</code></a>,
made available in <code>brolgar</code>).</p>
<p><code>features</code> works by specifying the data, the variable to
summarise, and the feature to calculate:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">features</span>(<span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="sc">&lt;</span>VARIABLE<span class="sc">&gt;</span>, <span class="sc">&lt;</span>FEATURE<span class="sc">&gt;</span>)</span></code></pre></div>
<p>or with the pipe:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="sc">&lt;</span>DATA<span class="sc">&gt;</span> <span class="sc">%&gt;%</span> <span class="fu">features</span>(<span class="sc">&lt;</span>VARIABLE<span class="sc">&gt;</span>, <span class="sc">&lt;</span>FEATURE<span class="sc">&gt;</span>)</span></code></pre></div>
<p>As an example, we can calculate a five number summary (minimum, 25th
quantile, median, mean, 75th quantile, and maximum) of the data using
<code>feat_five_num</code>, like so:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages_five</span> <span class="op">&lt;-</span> <span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">feat_five_num</span><span class="op">)</span></span>
<span></span>
<span><span class="va">wages_five</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 888 × 6</span></span></span>
<span><span class="co">#&gt;       id   min   q25   med   q75   max</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31 1.43   1.48  1.73  2.02  2.13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    36 1.80   1.97  2.32  2.59  2.93</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    53 1.54   1.58  1.71  1.89  3.24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   122 0.763  2.10  2.19  2.46  2.92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   134 2.00   2.28  2.36  2.79  2.93</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   145 1.48   1.58  1.77  1.89  2.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   155 1.54   1.83  2.22  2.44  2.64</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   173 1.56   1.68  2.00  2.05  2.34</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   206 2.03   2.07  2.30  2.45  2.48</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   207 1.58   1.87  2.15  2.26  2.66</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 878 more rows</span></span></span></code></pre></div>
<p>Here we are taking the <code>wages</code> data, piping it to
<code>features</code>, and then telling it to summarise the
<code>ln_wages</code> variable, using <code>feat_five_num</code>.</p>
<p>There are several handy functions for calculating features of the
data that <code>brolgar</code> provides. These all start with
<code>feat_</code>.</p>
<p>You can, for example, find those whose values only increase or
decrease with <code>feat_monotonic</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages_mono</span> <span class="op">&lt;-</span> <span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">feat_monotonic</span><span class="op">)</span></span>
<span></span>
<span><span class="va">wages_mono</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 888 × 5</span></span></span>
<span><span class="co">#&gt;       id increase decrease unvary monotonic</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    36 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    53 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   122 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   134 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   145 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   155 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   173 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   206 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   207 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 878 more rows</span></span></span></code></pre></div>
<p>These could then be used to identify individuals who only increase
like so:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">wages_mono</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">increase</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 50 × 5</span></span></span>
<span><span class="co">#&gt;       id increase decrease unvary monotonic</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   206 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   295 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   518 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">1</span>508 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">2</span>178 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">2</span>194 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">2</span>330 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">2</span>456 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">2</span>612 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>890 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 40 more rows</span></span></span></code></pre></div>
<p>They could then be joined back to the data</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages_mono_join</span> <span class="op">&lt;-</span> <span class="va">wages_mono</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">increase</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">wages</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">wages_mono_join</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 164 × 13</span></span></span>
<span><span class="co">#&gt;       id increase decrease unvary monotonic ln_wages    xp   ged xp_since_ged</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>   206 TRUE     FALSE    FALSE  TRUE          2.03 1.87      0        0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>   206 TRUE     FALSE    FALSE  TRUE          2.30 2.81      0        0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>   206 TRUE     FALSE    FALSE  TRUE          2.48 4.31      0        0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   295 TRUE     FALSE    FALSE  TRUE          1.79 2.03      0        0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   295 TRUE     FALSE    FALSE  TRUE          1.81 3.12      0        0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   295 TRUE     FALSE    FALSE  TRUE          2.11 4.16      0        0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   295 TRUE     FALSE    FALSE  TRUE          2.13 5.08      0        0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   295 TRUE     FALSE    FALSE  TRUE          2.31 6.58      0        0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   518 TRUE     FALSE    FALSE  TRUE          1.27 0.525     1        0.525</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   518 TRUE     FALSE    FALSE  TRUE          1.61 1.93      1        1.93 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 154 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more variables: black &lt;int&gt;, hispanic &lt;int&gt;, high_grade &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   unemploy_rate &lt;dbl&gt;</span></span></span></code></pre></div>
<p>And these could be plotted:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">wages_mono_join</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>           y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>           group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="finding-features_files/figure-html/gg-wages-mono-1.png" width="700"></p>
<p>To get a sense of the data and where it came from, we could create a
plot with <code>gghighlight</code> to highlight those that only
increase, by using <code>gghighlight(increase)</code> - since
<code>increase</code> is a logical, this tells <code>gghighlight</code>
to highlight those that are TRUE.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yutannihilation.github.io/gghighlight/" class="external-link">gghighlight</a></span><span class="op">)</span></span>
<span><span class="va">wages_mono</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">wages</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>             y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>             group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://yutannihilation.github.io/gghighlight/reference/gghighlight.html" class="external-link">gghighlight</a></span><span class="op">(</span><span class="va">increase</span><span class="op">)</span></span></code></pre></div>
<p><img src="finding-features_files/figure-html/gg-high-mono-1.png" width="700"></p>
<p>You can explore the available features, see the function <a href="https://brolgar.njtierney.com/reference/index.html" class="external-link">References</a></p>
</div>
<div class="section level2">
<h2 id="creating-your-own-features">Creating your own Features<a class="anchor" aria-label="anchor" href="#creating-your-own-features"></a>
</h2>
<p>To create your own features or summaries to pass to
<code>features</code>, you provide a named list of functions. For
example:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/njtierney/brolgar" class="external-link">brolgar</a></span><span class="op">)</span></span>
<span><span class="va">feat_three</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min <span class="op">=</span> <span class="va">min</span>,</span>
<span>                   med <span class="op">=</span> <span class="va">median</span>,</span>
<span>                   max <span class="op">=</span> <span class="va">max</span><span class="op">)</span></span>
<span></span>
<span><span class="va">feat_three</span></span>
<span><span class="co">#&gt; $min</span></span>
<span><span class="co">#&gt; function (..., na.rm = FALSE)  .Primitive("min")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $med</span></span>
<span><span class="co">#&gt; function (x, na.rm = FALSE, ...) </span></span>
<span><span class="co">#&gt; UseMethod("median")</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x55abc6ef7cd0&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: namespace:stats&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $max</span></span>
<span><span class="co">#&gt; function (..., na.rm = FALSE)  .Primitive("max")</span></span></code></pre></div>
<p>These are then passed to <code>features</code> like so:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">feat_three</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 888 × 4</span></span></span>
<span><span class="co">#&gt;       id   min   med   max</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31 1.43   1.73  2.13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    36 1.80   2.32  2.93</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    53 1.54   1.71  3.24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   122 0.763  2.19  2.92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   134 2.00   2.36  2.93</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   145 1.48   1.77  2.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   155 1.54   2.22  2.64</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   173 1.56   2.00  2.34</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   206 2.03   2.30  2.48</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   207 1.58   2.15  2.66</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 878 more rows</span></span></span>
<span></span>
<span><span class="va">heights</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">height_cm</span>, <span class="va">feat_three</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 144 × 4</span></span></span>
<span><span class="co">#&gt;    country       min   med   max</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Afghanistan  161.  167.  168.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Albania      168.  170.  170.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Algeria      166.  169   171.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Angola       159.  167.  169.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Argentina    167.  168.  174.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Armenia      164.  169.  172.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Australia    170   172.  178.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Austria      162.  167.  179.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Azerbaijan   170.  172.  172.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Bahrain      161.  164.  164 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 134 more rows</span></span></span></code></pre></div>
<p>Inside <code>brolgar</code>, the features are created with the
following syntax:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">feat_five_num</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    min <span class="op">=</span> <span class="fu"><a href="../reference/b_summaries.html">b_min</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span>,</span>
<span>    q25 <span class="op">=</span> <span class="fu"><a href="../reference/b_summaries.html">b_q25</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span>,</span>
<span>    med <span class="op">=</span> <span class="fu"><a href="../reference/b_summaries.html">b_median</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span>,</span>
<span>    q75 <span class="op">=</span> <span class="fu"><a href="../reference/b_summaries.html">b_q75</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span>,</span>
<span>    max <span class="op">=</span> <span class="fu"><a href="../reference/b_summaries.html">b_max</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Here the functions <code>b_</code> are functions with a default of
<code>na.rm = TRUE</code>, and in the cases of quantiles, they use
<code>type = 8</code>, and <code>names = FALSE</code>.</p>
</div>
<div class="section level2">
<h2 id="accessing-sets-of-features">Accessing sets of features<a class="anchor" aria-label="anchor" href="#accessing-sets-of-features"></a>
</h2>
<p>If you want to run many or all features from a package on your data
you can collect them all with <code>feature_set</code>. For example:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fabletools.tidyverts.org/" class="external-link">fabletools</a></span><span class="op">)</span></span>
<span><span class="va">feat_brolgar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://fabletools.tidyverts.org/reference/feature_set.html" class="external-link">feature_set</a></span><span class="op">(</span>pkgs <span class="op">=</span> <span class="st">"brolgar"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">feat_brolgar</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6</span></span></code></pre></div>
<p>You could then run these like so:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">feat_brolgar</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 888 × 46</span></span></span>
<span><span class="co">#&gt;       id min...1 med...2 max...3 min...4 q25...5 med...6 q75...7 max...8 min...9</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31   1.43     1.73    2.13   1.43     1.48    1.73    2.02    2.13   1.43 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    36   1.80     2.32    2.93   1.80     1.97    2.32    2.59    2.93   1.80 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    53   1.54     1.71    3.24   1.54     1.58    1.71    1.89    3.24   1.54 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   122   0.763    2.19    2.92   0.763    2.10    2.19    2.46    2.92   0.763</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   134   2.00     2.36    2.93   2.00     2.28    2.36    2.79    2.93   2.00 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   145   1.48     1.77    2.04   1.48     1.58    1.77    1.89    2.04   1.48 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   155   1.54     2.22    2.64   1.54     1.83    2.22    2.44    2.64   1.54 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   173   1.56     2.00    2.34   1.56     1.68    2.00    2.05    2.34   1.56 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   206   2.03     2.30    2.48   2.03     2.07    2.30    2.45    2.48   2.03 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   207   1.58     2.15    2.66   1.58     1.87    2.15    2.26    2.66   1.58 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 878 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 36 more variables: max...10 &lt;dbl&gt;, range_diff...11 &lt;dbl&gt;, iqr...12 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   var...13 &lt;dbl&gt;, sd...14 &lt;dbl&gt;, mad...15 &lt;dbl&gt;, iqr...16 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   min...17 &lt;dbl&gt;, max...18 &lt;dbl&gt;, median &lt;dbl&gt;, mean &lt;dbl&gt;, q25...21 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   q75...22 &lt;dbl&gt;, range1 &lt;dbl&gt;, range2 &lt;dbl&gt;, range_diff...25 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   sd...26 &lt;dbl&gt;, var...27 &lt;dbl&gt;, mad...28 &lt;dbl&gt;, iqr...29 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   increase...30 &lt;dbl&gt;, decrease...31 &lt;dbl&gt;, unvary...32 &lt;dbl&gt;, …</span></span></span></code></pre></div>
<p>For more information see <code><a href="https://fabletools.tidyverts.org/reference/feature_set.html" class="external-link">?fabletools::feature_set</a></code></p>
</div>
<div class="section level2">
<h2 id="registering-a-feature-in-a-package">Registering a feature in a package<a class="anchor" aria-label="anchor" href="#registering-a-feature-in-a-package"></a>
</h2>
<p>If you create features in your own package and want to make them
accessible with <code>feature_set</code>, do the following.</p>
<p>Functions can be registered via
<code><a href="https://fabletools.tidyverts.org/reference/register_feature.html" class="external-link">fabletools::register_feature()</a></code>. To register features in a
package, I create a file called <code>zzz.R</code>, and use the
<code>.onLoad(...)</code> function to set this up on loading the
package:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">.onLoad</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">fabletools</span><span class="fu">::</span><span class="fu"><a href="https://fabletools.tidyverts.org/reference/register_feature.html" class="external-link">register_feature</a></span><span class="op">(</span><span class="va">feat_three_num</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"summary"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="co"># ... and as many as you want here!</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicholas Tierney, Di Cook, Tania Prvan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
