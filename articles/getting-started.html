<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started • brolgar</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">brolgar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/getting-started.html">Getting Started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/visualisation-gallery.html">Gallery</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/longitudinal-data-structures.html">Data Structures</a></li>
    <li><a class="dropdown-item" href="../articles/exploratory-modelling.html">Exploratory Modelling</a></li>
    <li><a class="dropdown-item" href="../articles/finding-features.html">Finding Features</a></li>
    <li><a class="dropdown-item" href="../articles/id-interesting-obs.html">Identify Interesting Observations</a></li>
    <li><a class="dropdown-item" href="../articles/mixed-effects-models.html">Exploring Mixed Effects Models</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/njtierney/brolgar/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/njtierney/brolgar/blob/master/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/njtierney/brolgar" class="external-link">brolgar</a></span><span class="op">)</span></span></code></pre></div>
<p>When we first get a longitudinal dataset, you need to understand some
of its structure. This vignette demonstrates part of the process of
understanding your new longitudinal data.</p>
<div class="section level2">
<h2 id="setting-up-your-data">Setting up your data<a class="anchor" aria-label="anchor" href="#setting-up-your-data"></a>
</h2>
<p>To use <code>brolgar</code> with your work, you should convert your
longitudinal data into a time series <code>tsibble</code> using the
<code>tsibble</code> package. To do so, you need to identify the unique
identifying <code>key</code>, and time <code>index</code>. For
example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html" class="external-link">as_tsibble</a></span><span class="op">(</span><span class="va">wages</span>,</span>
<span>                    key <span class="op">=</span> <span class="va">id</span>,</span>
<span>                    index <span class="op">=</span> <span class="va">xp</span>,</span>
<span>                    regular <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>To learn more about longitudinal data as time series, see the
vignette: <a href="https://brolgar.njtierney.com/articles/longitudinal-data-structures.html" class="external-link">Longitudinal
Data Structures</a>.</p>
</div>
<div class="section level2">
<h2 id="basic-summaries-of-the-data">Basic summaries of the data<a class="anchor" aria-label="anchor" href="#basic-summaries-of-the-data"></a>
</h2>
<p>When you first get a dataset, you need to get an overall sense of
what is in the data.</p>
<div class="section level3">
<h3 id="how-many-observations-are-there">How many observations are there?<a class="anchor" aria-label="anchor" href="#how-many-observations-are-there"></a>
</h3>
<p>We can kind the number of keys using <code><a href="https://tsibble.tidyverts.org/reference/key-data.html" class="external-link">n_keys()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tsibble.tidyverts.org/reference/key-data.html" class="external-link">n_keys</a></span><span class="op">(</span><span class="va">wages</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 888</span></span></code></pre></div>
<p>Note that this is a single number, in this case, we have 888
observations.</p>
<p>However, we might want to know how many observations we have for each
individual. If we want the number of observations in each variable, then
we can use <code><a href="../reference/n_obs.html">n_obs()</a></code> with <code><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">n_obs</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 888 × 2</span></span></span>
<span><span class="co">#&gt;       id n_obs</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31     8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    36    10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    53     8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   122    10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   134    12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   145     9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   155    11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   173     6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   206     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   207    11</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 878 more rows</span></span></span></code></pre></div>
<p>A plot of this can help provide better understanding of the
distribution of observations.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">n_obs</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">n_obs</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/plot-nobs-1.png" width="700"></p>
<div class="section level4">
<h4 id="add_n_obs">
<code>add_n_obs()</code><a class="anchor" aria-label="anchor" href="#add_n_obs"></a>
</h4>
<p>You can add information about the number of observations for each key
with <code><a href="../reference/add_n_obs.html">add_n_obs()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/add_n_obs.html">add_n_obs</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tsibble: 6,402 x 10 [!]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Key:       id [888]</span></span></span>
<span><span class="co">#&gt;       id    xp n_obs ln_wages   ged xp_since_ged black hispanic high_grade</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31 0.015     8     1.49     1        0.015     0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    31 0.715     8     1.43     1        0.715     0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    31 1.73      8     1.47     1        1.73      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    31 2.77      8     1.75     1        2.77      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    31 3.93      8     1.93     1        3.93      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    31 4.95      8     1.71     1        4.95      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    31 5.96      8     2.09     1        5.96      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    31 6.98      8     2.13     1        6.98      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    36 0.315    10     1.98     1        0.315     0        0          9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    36 0.983    10     1.80     1        0.983     0        0          9</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6,392 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: unemploy_rate &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Which you can then use to <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> observations:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/add_n_obs.html">add_n_obs</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">n_obs</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tsibble: 6,145 x 10 [!]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Key:       id [764]</span></span></span>
<span><span class="co">#&gt;       id    xp n_obs ln_wages   ged xp_since_ged black hispanic high_grade</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31 0.015     8     1.49     1        0.015     0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    31 0.715     8     1.43     1        0.715     0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    31 1.73      8     1.47     1        1.73      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    31 2.77      8     1.75     1        2.77      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    31 3.93      8     1.93     1        3.93      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    31 4.95      8     1.71     1        4.95      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    31 5.96      8     2.09     1        5.96      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    31 6.98      8     2.13     1        6.98      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    36 0.315    10     1.98     1        0.315     0        0          9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    36 0.983    10     1.80     1        0.983     0        0          9</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6,135 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: unemploy_rate &lt;dbl&gt;</span></span></span></code></pre></div>
<p>We can also look at the distance between experience, to understand
what the distribution of experience is</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages_xp_range</span> <span class="op">&lt;-</span> <span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">xp</span>,</span>
<span>           <span class="va">feat_ranges</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">wages_xp_range</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">range_diff</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/wages-xp-1.png" width="700"></p>
<p>We can then explore the range of experience to see what the most
common experience is</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages_xp_range</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">range_diff</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>prop <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 829 × 3</span></span></span>
<span><span class="co">#&gt;    range_diff     n    prop</span></span>
<span><span class="co">#&gt;         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     0         38 0.042<span style="text-decoration: underline;">8</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     0.015<span style="text-decoration: underline;">0</span>     1 0.001<span style="text-decoration: underline;">13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     0.068      1 0.001<span style="text-decoration: underline;">13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     0.137      1 0.001<span style="text-decoration: underline;">13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     0.153      1 0.001<span style="text-decoration: underline;">13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     0.185      1 0.001<span style="text-decoration: underline;">13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     0.22       1 0.001<span style="text-decoration: underline;">13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     0.225      1 0.001<span style="text-decoration: underline;">13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     0.231      1 0.001<span style="text-decoration: underline;">13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     0.26       1 0.001<span style="text-decoration: underline;">13</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 819 more rows</span></span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="efficiently-exploring-longitudinal-data">Efficiently exploring longitudinal data<a class="anchor" aria-label="anchor" href="#efficiently-exploring-longitudinal-data"></a>
</h3>
<p>To avoid staring at a plate of spaghetti, you can look at a random
subset of the data. Brolgar provides some intuitive functions to help
with this.</p>
<div class="section level4">
<h4 id="sample_n_keys">
<code>sample_n_keys()</code><a class="anchor" aria-label="anchor" href="#sample_n_keys"></a>
</h4>
<p>In <code>dplyr</code>, you can use <code><a href="https://dplyr.tidyverse.org/reference/sample_n.html" class="external-link">sample_n()</a></code> to sample
<code>n</code> observations. Similarly, with <code>brolgar</code>, you
can take a random sample of <code>n</code> keys using
<code><a href="../reference/sample-n-frac-keys.html">sample_n_keys()</a></code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">-</span><span class="fl">7</span><span class="op">-</span><span class="fl">15</span><span class="op">-</span><span class="fl">1300</span><span class="op">)</span></span>
<span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/sample-n-frac-keys.html">sample_n_keys</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>             y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>             group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/plot-sample-n-keys-1.png" width="700"></p>
</div>
</div>
<div class="section level3">
<h3 id="filtering-observations">Filtering observations<a class="anchor" aria-label="anchor" href="#filtering-observations"></a>
</h3>
<p>You can combine <code><a href="../reference/sample-n-frac-keys.html">sample_n_keys()</a></code> with
<code><a href="../reference/add_n_obs.html">add_n_obs()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> to only show keys
with many observations:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_n_obs.html">add_n_obs</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">n_obs</span> <span class="op">&gt;</span> <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/sample-n-frac-keys.html">sample_n_keys</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>             y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>             group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/plot-filter-sample-n-keys-1.png" width="700"></p>
<p>(Note: <code><a href="../reference/sample-n-frac-keys.html">sample_frac_keys()</a></code>, which samples a fraction of
available keys.)</p>
<p>Now, how do you break these into many plots?</p>
</div>
<div class="section level3">
<h3 id="clever-facets-facet_strata">Clever facets: <code>facet_strata</code><a class="anchor" aria-label="anchor" href="#clever-facets-facet_strata"></a>
</h3>
<p><code>brolgar</code> provides some clever facets to help make it
easier to explore your data. <code><a href="../reference/facet_strata.html">facet_strata()</a></code> splits the data
into 12 groups by default:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">-</span><span class="fl">07</span><span class="op">-</span><span class="fl">23</span><span class="op">-</span><span class="fl">1936</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">wages</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>           y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>           group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/facet_strata.html">facet_strata</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/facet-strata-1.png" width="700"></p>
<p>But you could ask it to split the data into a more groups</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">-</span><span class="fl">07</span><span class="op">-</span><span class="fl">25</span><span class="op">-</span><span class="fl">1450</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">wages</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>           y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>           group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/facet_strata.html">facet_strata</a></span><span class="op">(</span>n_strata <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/facet-strata-20-1.png" width="700"></p>
<p>And what if you want to show only a few samples per facet?</p>
</div>
<div class="section level3">
<h3 id="clever-facets-facet_sample">Clever facets: <code>facet_sample</code><a class="anchor" aria-label="anchor" href="#clever-facets-facet_sample"></a>
</h3>
<p><code><a href="../reference/facet_sample.html">facet_sample()</a></code> allows you to specify the number of keys
per facet, and the number of facets with <code>n_per_facet</code> and
<code>n_facets</code>. It splits the data into 12 facets with 3 per
facet by default:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">-</span><span class="fl">07</span><span class="op">-</span><span class="fl">23</span><span class="op">-</span><span class="fl">1937</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">wages</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>           y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>           group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/facet_sample.html">facet_sample</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/facet-sample-1.png" width="700"></p>
<p>But you can specify your own number:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">-</span><span class="fl">07</span><span class="op">-</span><span class="fl">25</span><span class="op">-</span><span class="fl">1533</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">wages</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>           y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>           group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/facet_sample.html">facet_sample</a></span><span class="op">(</span>n_per_facet <span class="op">=</span> <span class="fl">3</span>,</span>
<span>               n_facets <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/facet-sample-3by-20-1.png" width="700"></p>
<p>Under the hood, <code><a href="../reference/facet_sample.html">facet_sample()</a></code> and
<code><a href="../reference/facet_strata.html">facet_strata()</a></code> use <code><a href="../reference/sample-n-frac-keys.html">sample_n_keys()</a></code> and
<code><a href="../reference/stratify_keys.html">stratify_keys()</a></code>.</p>
</div>
<div class="section level3">
<h3 id="exploratory-modelling">Exploratory modelling<a class="anchor" aria-label="anchor" href="#exploratory-modelling"></a>
</h3>
<p>You can fit a linear model for each key using
<code><a href="../reference/key_slope.html">key_slope()</a></code>. This returns the intercept and slope estimate
for each key, given some linear model formula. We can get the number of
observations, and slope information for each individual to identify
those that are decreasing over time.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/key_slope.html">key_slope</a></span><span class="op">(</span><span class="va">wages</span>,<span class="va">ln_wages</span> <span class="op">~</span> <span class="va">xp</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 888 × 3</span></span></span>
<span><span class="co">#&gt;       id .intercept .slope_xp</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31       1.41    0.101 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    36       2.04    0.058<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    53       2.29   -<span style="color: #BB0000;">0.358</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   122       1.93    0.037<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   134       2.03    0.083<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   145       1.59    0.046<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   155       1.66    0.086<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   173       1.61    0.100 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   206       1.73    0.180 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   207       1.62    0.088<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 878 more rows</span></span></span></code></pre></div>
<p>We can then join these summaries back to the data:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">wages_slope</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/key_slope.html">key_slope</a></span><span class="op">(</span><span class="va">wages</span>,<span class="va">ln_wages</span> <span class="op">~</span> <span class="va">xp</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">wages</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">wages_slope</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6,402 × 11</span></span></span>
<span><span class="co">#&gt;       id .intercept .slope_xp ln_wages    xp   ged xp_since_ged black hispanic</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31       1.41    0.101      1.49 0.015     1        0.015     0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    31       1.41    0.101      1.43 0.715     1        0.715     0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    31       1.41    0.101      1.47 1.73      1        1.73      0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    31       1.41    0.101      1.75 2.77      1        2.77      0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    31       1.41    0.101      1.93 3.93      1        3.93      0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    31       1.41    0.101      1.71 4.95      1        4.95      0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    31       1.41    0.101      2.09 5.96      1        5.96      0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    31       1.41    0.101      2.13 6.98      1        6.98      0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    36       2.04    0.058<span style="text-decoration: underline;">8</span>     1.98 0.315     1        0.315     0        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    36       2.04    0.058<span style="text-decoration: underline;">8</span>     1.80 0.983     1        0.983     0        0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6,392 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: high_grade &lt;int&gt;, unemploy_rate &lt;dbl&gt;</span></span></span></code></pre></div>
<p>And highlight those individuals with a negative slope using
<code>gghighlight</code>:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yutannihilation.github.io/gghighlight/" class="external-link">gghighlight</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">wages_slope</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># workaround for gghighlight + tsibble</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>, </span>
<span>             y <span class="op">=</span> <span class="va">ln_wages</span>, </span>
<span>             group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://yutannihilation.github.io/gghighlight/reference/gghighlight.html" class="external-link">gghighlight</a></span><span class="op">(</span><span class="va">.slope_xp</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/use-gg-highlight-1.png" width="700"></p>
<div class="section level4">
<h4 id="find-keys-near-other-summaries-with-keys_near">Find keys near other summaries with <code>keys_near</code><a class="anchor" aria-label="anchor" href="#find-keys-near-other-summaries-with-keys_near"></a>
</h4>
<p>We could take our slope information and find those individuals who
are representative of the min, median, maximum, etc of growth, using
<code><a href="../reference/keys_near.html">keys_near()</a></code>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages_slope</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/keys_near.html">keys_near</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">id</span>,</span>
<span>            var <span class="op">=</span> <span class="va">.slope_xp</span>,</span>
<span>            funs <span class="op">=</span> <span class="va">l_three_num</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 5</span></span></span>
<span><span class="co">#&gt;       id .slope_xp stat  stat_value stat_diff</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">6</span>863    0.045<span style="text-decoration: underline;">2</span> med       0.045<span style="text-decoration: underline;">2</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">6</span>863    0.045<span style="text-decoration: underline;">2</span> med       0.045<span style="text-decoration: underline;">2</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">6</span>863    0.045<span style="text-decoration: underline;">2</span> med       0.045<span style="text-decoration: underline;">2</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">6</span>863    0.045<span style="text-decoration: underline;">2</span> med       0.045<span style="text-decoration: underline;">2</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">6</span>863    0.045<span style="text-decoration: underline;">2</span> med       0.045<span style="text-decoration: underline;">2</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">6</span>863    0.045<span style="text-decoration: underline;">2</span> med       0.045<span style="text-decoration: underline;">2</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">6</span>863    0.045<span style="text-decoration: underline;">2</span> med       0.045<span style="text-decoration: underline;">2</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">6</span>863    0.045<span style="text-decoration: underline;">2</span> med       0.045<span style="text-decoration: underline;">2</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">7</span>918   -<span style="color: #BB0000;">4.58</span>   min      -<span style="color: #BB0000;">4.58</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">7</span>918   -<span style="color: #BB0000;">4.58</span>   min      -<span style="color: #BB0000;">4.58</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>  <span style="text-decoration: underline;">7</span>918   -<span style="color: #BB0000;">4.58</span>   min      -<span style="color: #BB0000;">4.58</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> <span style="text-decoration: underline;">12</span>455   13.2    max      13.2            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> <span style="text-decoration: underline;">12</span>455   13.2    max      13.2            0</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages_slope</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/keys_near.html">keys_near</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">id</span>,</span>
<span>            var <span class="op">=</span> <span class="va">.slope_xp</span>,</span>
<span>            funs <span class="op">=</span> <span class="va">l_three_num</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">wages</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>             y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>             group <span class="op">=</span> <span class="va">id</span>,</span>
<span>             colour <span class="op">=</span> <span class="va">stat</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/keys-near-plot-1.png" width="700"></p>
</div>
</div>
<div class="section level3">
<h3 id="finding-features-in-longitudinal-data">Finding features in longitudinal data<a class="anchor" aria-label="anchor" href="#finding-features-in-longitudinal-data"></a>
</h3>
<p>You can extract <code>features</code> of longitudinal data using the
<code>features</code> function, from <code>fabletools</code>. You can,
for example, calculate the minimum of a given variable for each key by
providing a named list like so:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, </span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>min <span class="op">=</span> <span class="va">min</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 888 × 2</span></span></span>
<span><span class="co">#&gt;       id   min</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31 1.43 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    36 1.80 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    53 1.54 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   122 0.763</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   134 2.00 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   145 1.48 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   155 1.54 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   173 1.56 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   206 2.03 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   207 1.58 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 878 more rows</span></span></span></code></pre></div>
<p><code>brolgar</code> provides some sets of features, which start with
<code>feat_</code>.</p>
<p>For example, the five number summary is
<code>feat_five_num</code>:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">feat_five_num</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 888 × 6</span></span></span>
<span><span class="co">#&gt;       id   min   q25   med   q75   max</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31 1.43   1.48  1.73  2.02  2.13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    36 1.80   1.97  2.32  2.59  2.93</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    53 1.54   1.58  1.71  1.89  3.24</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   122 0.763  2.10  2.19  2.46  2.92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   134 2.00   2.28  2.36  2.79  2.93</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   145 1.48   1.58  1.77  1.89  2.04</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   155 1.54   1.83  2.22  2.44  2.64</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   173 1.56   1.68  2.00  2.05  2.34</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   206 2.03   2.07  2.30  2.45  2.48</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   207 1.58   1.87  2.15  2.26  2.66</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 878 more rows</span></span></span></code></pre></div>
<p>Or finding those whose values only increase or decrease with
<code>feat_monotonic</code></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">feat_monotonic</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 888 × 5</span></span></span>
<span><span class="co">#&gt;       id increase decrease unvary monotonic</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    36 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    53 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>   122 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>   134 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>   145 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>   155 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>   173 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>   206 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>   207 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 878 more rows</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="linking-individuals-back-to-the-data">Linking individuals back to the data<a class="anchor" aria-label="anchor" href="#linking-individuals-back-to-the-data"></a>
</h3>
<p>You can join these features back to the data with
<code>left_join</code>, like so:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">feat_monotonic</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">wages</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>             y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>             group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://yutannihilation.github.io/gghighlight/reference/gghighlight.html" class="external-link">gghighlight</a></span><span class="op">(</span><span class="va">increase</span><span class="op">)</span></span></code></pre></div>
<p><img src="getting-started_files/figure-html/features-left-join-1.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicholas Tierney, Di Cook, Tania Prvan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
