<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Longitudinal Data Structures • brolgar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Longitudinal Data Structures">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brolgar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/getting-started.html">Getting Started</a>
</li>
<li>
  <a href="../articles/visualisation-gallery.html">Gallery</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/longitudinal-data-structures.html">Data Structures</a>
    </li>
    <li>
      <a href="../articles/exploratory-modelling.html">Exploratory Modelling</a>
    </li>
    <li>
      <a href="../articles/finding-features.html">Finding Features</a>
    </li>
    <li>
      <a href="../articles/id-interesting-obs.html">Identify Interesting Observations</a>
    </li>
    <li>
      <a href="../articles/mixed-effects-models.html">Exploring Mixed Effects Models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/njtierney/brolgar">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="longitudinal-data-structures_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Longitudinal Data Structures</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/njtierney/brolgar/blob/master/vignettes/longitudinal-data-structures.Rmd"><code>vignettes/longitudinal-data-structures.Rmd</code></a></small>
      <div class="hidden name"><code>longitudinal-data-structures.Rmd</code></div>

    </div>

    
    
<p>There are many ways to describe longitudinal data - from panel data, cross-sectional data, and time series. We define longitudinal data as:</p>
<blockquote>
<p>Information from the same individuals, recorded at multiple points in time.</p>
</blockquote>
<p>To explore and model longitudinal data, It is important to understand what variables represent the individual components, and the time components, and how these identify an individual moving through time. Identifying the individual and time components can sometimes be a challenge, so this vignette walks through how to do this.</p>
<div id="defining-longitudinal-data-as-a-tsibble" class="section level1">
<h1 class="hasAnchor">
<a href="#defining-longitudinal-data-as-a-tsibble" class="anchor"></a>Defining longitudinal data as a <code>tsibble</code>
</h1>
<p>The tools and workflows in <code>brolgar</code> are designed to work with a special tidy time series data frame called a <code>tsibble</code>. We can define our longitudinal data in terms of a time series to gain access to some really useful tools. To do so, we need to identify three components:</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong> variable in your data is the <strong>identifier</strong> of your individual.</li>
<li>The <strong>index</strong> variable is the <strong>time</strong> component of your data.</li>
<li>The <strong>regularity</strong> of the time interval (index). Longitudinal data typically has irregular time periods between measurements, but can have regular measurements.</li>
</ol>
<p>Together, time <strong>index</strong> and <strong>key</strong> uniquely identify an observation with repeated measurements</p>
<p>The term <code>key</code> is used a lot in brolgar, so it is an important idea to internalise:</p>
<blockquote>
<p><strong>The key is the identifier of your individuals or series</strong></p>
</blockquote>
<p>Why care about defining longitudinal data as a time series? Once we account for this time series structure inherent in longitudinal data, we gain access to a suite of nice tools that simplify and accelerate how we work with time series data.</p>
<p><code>brolgar</code> is built on top of the powerful <a href="https://tsibble.tidyverts.org/"><code>tsibble</code></a> package by <a href="https://earo.me/">Earo Wang</a>, if you would like to learn more, see the <a href="https://tsibble.tidyverts.org/">official package documentation</a> or read <a href="https://arxiv.org/abs/1901.10257">the paper</a>.</p>
<div id="converting-your-longitudinal-data-to-a-time-series" class="section level2">
<h2 class="hasAnchor">
<a href="#converting-your-longitudinal-data-to-a-time-series" class="anchor"></a>Converting your longitudinal data to a time series</h2>
<p>To convert longitudinal data into a “<strong>t</strong>ime <strong>s</strong>eries tibble”, a <a href="https://tsibble.tidyverts.org/"><code>tsibble</code></a>, we need to consider which variables identify:</p>
<ol style="list-style-type: decimal">
<li>The individual, who would have repeated measurements. This is the <strong>key</strong>
</li>
<li>The time component, this is the <strong>index</strong> .</li>
<li>The <strong>regularity</strong> of the time interval (index).</li>
</ol>
<p>Together, time <strong>index</strong> and <strong>key</strong> uniquely identify an observation with repeated measurements</p>
<p>The vignette now walks through some examples of converting longitudinal data into a <code>tsibble</code>.</p>
</div>
</div>
<div id="example-data-wages" class="section level1">
<h1 class="hasAnchor">
<a href="#example-data-wages" class="anchor"></a>example data: wages</h1>
<p>Let’s look at the <strong>wages</strong> data analysed in Singer &amp; Willett (2003). This data contains measurements on hourly wages by years in the workforce, with education and race as covariates. The population measured was male high-school dropouts, aged between 14 and 17 years when first measured. Below is the first 10 rows of the data.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(brolgar)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr))</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span>(wages, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>()</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">id</th>
<th align="right">ln_wages</th>
<th align="right">xp</th>
<th align="right">ged</th>
<th align="right">xp_since_ged</th>
<th align="right">black</th>
<th align="right">hispanic</th>
<th align="right">high_grade</th>
<th align="right">unemploy_rate</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">31</td>
<td align="right">1.491</td>
<td align="right">0.015</td>
<td align="right">1</td>
<td align="right">0.015</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">3.21</td>
</tr>
<tr class="even">
<td align="right">31</td>
<td align="right">1.433</td>
<td align="right">0.715</td>
<td align="right">1</td>
<td align="right">0.715</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">3.21</td>
</tr>
<tr class="odd">
<td align="right">31</td>
<td align="right">1.469</td>
<td align="right">1.734</td>
<td align="right">1</td>
<td align="right">1.734</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">3.21</td>
</tr>
<tr class="even">
<td align="right">31</td>
<td align="right">1.749</td>
<td align="right">2.773</td>
<td align="right">1</td>
<td align="right">2.773</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">3.30</td>
</tr>
<tr class="odd">
<td align="right">31</td>
<td align="right">1.931</td>
<td align="right">3.927</td>
<td align="right">1</td>
<td align="right">3.927</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">2.89</td>
</tr>
<tr class="even">
<td align="right">31</td>
<td align="right">1.709</td>
<td align="right">4.946</td>
<td align="right">1</td>
<td align="right">4.946</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">2.49</td>
</tr>
<tr class="odd">
<td align="right">31</td>
<td align="right">2.086</td>
<td align="right">5.965</td>
<td align="right">1</td>
<td align="right">5.965</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">2.60</td>
</tr>
<tr class="even">
<td align="right">31</td>
<td align="right">2.129</td>
<td align="right">6.984</td>
<td align="right">1</td>
<td align="right">6.984</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">4.80</td>
</tr>
<tr class="odd">
<td align="right">36</td>
<td align="right">1.982</td>
<td align="right">0.315</td>
<td align="right">1</td>
<td align="right">0.315</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">9</td>
<td align="right">4.89</td>
</tr>
<tr class="even">
<td align="right">36</td>
<td align="right">1.798</td>
<td align="right">0.983</td>
<td align="right">1</td>
<td align="right">0.983</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">9</td>
<td align="right">7.40</td>
</tr>
</tbody>
</table>
<p>To create a <code>tsibble</code> of the data we ask, “which variables identify…”:</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong>, the individual, who would have repeated measurements.</li>
<li>The <strong>index</strong>, the time component.</li>
<li>The <strong>regularity</strong> of the time interval (index).</li>
</ol>
<p>Together, time <strong>index</strong> and <strong>key</strong> uniquely identify an observation with repeated measurements</p>
<p>From this, we can say that:</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong> is the variable <code>id</code> - the subject id, from 1-888.</li>
<li>The <strong>index</strong> is the variable <code>xp</code> the experience in years an individual has.</li>
<li>The data is <strong>irregular</strong> since the experience is a fraction of year that is not an integer.</li>
</ol>
<p>We can use this information to create a <code>tsibble</code> of this data using <code>as_tsibble</code></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tsibble)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html">as_tsibble</a></span>(<span class="dt">x =</span> wages,</span>
<span id="cb2-3"><a href="#cb2-3"></a>           <span class="dt">key =</span> id,</span>
<span id="cb2-4"><a href="#cb2-4"></a>           <span class="dt">index =</span> xp,</span>
<span id="cb2-5"><a href="#cb2-5"></a>           <span class="dt">regular =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>#&gt; # A tsibble: 6,402 x 9 [!]
#&gt; # Key:       id [888]
#&gt;       id ln_wages    xp   ged xp_since_ged black hispanic high_grade
#&gt;    &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;        &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;
#&gt;  1    31     1.49 0.015     1        0.015     0        1          8
#&gt;  2    31     1.43 0.715     1        0.715     0        1          8
#&gt;  3    31     1.47 1.73      1        1.73      0        1          8
#&gt;  4    31     1.75 2.77      1        2.77      0        1          8
#&gt;  5    31     1.93 3.93      1        3.93      0        1          8
#&gt;  6    31     1.71 4.95      1        4.95      0        1          8
#&gt;  7    31     2.09 5.96      1        5.96      0        1          8
#&gt;  8    31     2.13 6.98      1        6.98      0        1          8
#&gt;  9    36     1.98 0.315     1        0.315     0        0          9
#&gt; 10    36     1.80 0.983     1        0.983     0        0          9
#&gt; # … with 6,392 more rows, and 1 more variable: unemploy_rate &lt;dbl&gt;</code></pre>
<p>Note that <code>regular = FALSE</code>, since we have an <code>irregular</code> time series</p>
<p>Note the following information printed at the top of <code>wages</code></p>
<pre><code># A tsibble: 6,402 x 9 [!]
# Key:       id [888]
...</code></pre>
<p>This says:</p>
<ul>
<li>We have 6402 rows,</li>
<li>with 9 columns.</li>
</ul>
<p>The <code>!</code> at the top means that there is no regular spacing between series</p>
<p>The “key” variable is then listed - <code>id</code>, of which there 888.</p>
</div>
<div id="example-heights-data" class="section level1">
<h1 class="hasAnchor">
<a href="#example-heights-data" class="anchor"></a>example: heights data</h1>
<p>The heights data is a little simpler than the wages data, and contains the average male heights in 144 countries from 1810-1989, with a smaller number of countries from 1500-1800.</p>
<p>It contains four variables:</p>
<ul>
<li>country</li>
<li>continent</li>
<li>year</li>
<li>height_cm</li>
</ul>
<p>To create a <code>tsibble</code> of the data we ask, “which variables identify…”:</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong>, the individual, who would have repeated measurements.</li>
<li>The <strong>index</strong>, the time component.</li>
<li>The <strong>regularity</strong> of the time interval (index).</li>
</ol>
<p>In this case:</p>
<ul>
<li>The individual is not a person, but a country</li>
<li>The time is year</li>
<li>The year is not regular because there are not measurements at a fixed year point.</li>
</ul>
<p>This data is already a <code>tsibble</code> object, we can create a <code>tsibble</code> with the following code:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html">as_tsibble</a></span>(<span class="dt">x =</span> heights,</span>
<span id="cb5-2"><a href="#cb5-2"></a>           <span class="dt">key =</span> country,</span>
<span id="cb5-3"><a href="#cb5-3"></a>           <span class="dt">index =</span> year,</span>
<span id="cb5-4"><a href="#cb5-4"></a>           <span class="dt">regular =</span> <span class="ot">FALSE</span>)</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt; # A tsibble: 1,490 x 4 [!]</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt; # Key:       country [144]</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt;    country     continent  year height_cm</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt;  1 Afghanistan Asia       1870      168.</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt;  2 Afghanistan Asia       1880      166.</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt;  3 Afghanistan Asia       1930      167.</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt;  4 Afghanistan Asia       1990      167.</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt;  5 Afghanistan Asia       2000      161.</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt;  6 Albania     Europe     1880      170.</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">#&gt;  7 Albania     Europe     1890      170.</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">#&gt;  8 Albania     Europe     1900      169.</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">#&gt;  9 Albania     Europe     2000      168.</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="co">#&gt; 10 Algeria     Africa     1910      169.</span></span>
<span id="cb5-19"><a href="#cb5-19"></a><span class="co">#&gt; # … with 1,480 more rows</span></span></code></pre></div>
</div>
<div id="example-gapminder" class="section level1">
<h1 class="hasAnchor">
<a href="#example-gapminder" class="anchor"></a>example: gapminder</h1>
<p>The gapminder R package contains a dataset of a subset of the gapminder study (link). This contains data on life expectancy, GDP per capita, and population by country.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(gapminder)</span>
<span id="cb6-2"><a href="#cb6-2"></a>gapminder</span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">#&gt; # A tibble: 1,704 x 6</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786.</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978.</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852.</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649.</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635.</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co">#&gt; # … with 1,694 more rows</span></span></code></pre></div>
<p>Let’s identify</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong>, the individual, who would have repeated measurements.</li>
<li>The <strong>index</strong>, the time component.</li>
<li>The <strong>regularity</strong> of the time interval (index).</li>
</ol>
<p>This is in fact very similar to the <code>heights</code> dataset:</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong> is the country</li>
<li>The <strong>index</strong> is the year</li>
</ol>
<p>To identify if the year is regular, we can do a bit of data exploration using <code><a href="../reference/index_summary.html">index_summary()</a></code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(country) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="st">  </span><span class="kw"><a href="../reference/index_summary.html">index_summary</a></span>(year)</span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">#&gt;    1952    1966    1980    1980    1993    2007</span></span></code></pre></div>
<p>This shows us that the year is every five - so now we know that this is a regular longitudinal dataset, and can be encoded like so:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html">as_tsibble</a></span>(gapminder,</span>
<span id="cb8-2"><a href="#cb8-2"></a>           <span class="dt">key =</span> country,</span>
<span id="cb8-3"><a href="#cb8-3"></a>           <span class="dt">index =</span> year,</span>
<span id="cb8-4"><a href="#cb8-4"></a>           <span class="dt">regular =</span> <span class="ot">TRUE</span>)</span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co">#&gt; # A tsibble: 1,704 x 6 [5Y]</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">#&gt; # Key:       country [142]</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt;  1 Afghanistan Asia       1952    28.8  8425333      779.</span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co">#&gt;  2 Afghanistan Asia       1957    30.3  9240934      821.</span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">#&gt;  3 Afghanistan Asia       1962    32.0 10267083      853.</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co">#&gt;  4 Afghanistan Asia       1967    34.0 11537966      836.</span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co">#&gt;  5 Afghanistan Asia       1972    36.1 13079460      740.</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="co">#&gt;  6 Afghanistan Asia       1977    38.4 14880372      786.</span></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="co">#&gt;  7 Afghanistan Asia       1982    39.9 12881816      978.</span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co">#&gt;  8 Afghanistan Asia       1987    40.8 13867957      852.</span></span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="co">#&gt;  9 Afghanistan Asia       1992    41.7 16317921      649.</span></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="co">#&gt; 10 Afghanistan Asia       1997    41.8 22227415      635.</span></span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="co">#&gt; # … with 1,694 more rows</span></span></code></pre></div>
</div>
<div id="example-pisa-data" class="section level1">
<h1 class="hasAnchor">
<a href="#example-pisa-data" class="anchor"></a>example: PISA data</h1>
<p>The PISA study measures school students around the world on a series of math, reading, and science scores. A subset of the data looks like so:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>pisa</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">#&gt; # A tibble: 433 x 11</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">#&gt;    country  year math_mean math_min math_max read_mean read_min read_max</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">#&gt;    &lt;fct&gt;   &lt;int&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co">#&gt;  1 ALB      2000      395.     27.4     722.      354.  59.7        640.</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co">#&gt;  2 ALB      2009      377.     79.6     706.      385.  17.0        662.</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">#&gt;  3 ALB      2012      395.     62.4     688.      394.   0.0834     742.</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">#&gt;  4 ALB      2015      412.    122.      711.      405.  93.6        825.</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">#&gt;  5 ALB      2018      437.     96.5     789.      405. 152.         693.</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">#&gt;  6 ARE      2009      421.     57.8     768.      431.  48.1        772.</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="co">#&gt;  7 ARE      2012      434.    138.      862.      442.  75.5        785.</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co">#&gt;  8 ARE      2015      427.     91.8     793.      432.  54.4        827.</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">#&gt;  9 ARE      2018      437.     87.6     865.      431.  84.0        814.</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co">#&gt; 10 ARG      2000      385.     16.0     675.      417.  84.2        761.</span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co">#&gt; # … with 423 more rows, and 3 more variables: science_mean &lt;dbl&gt;,</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co">#&gt; #   science_min &lt;dbl&gt;, science_max &lt;dbl&gt;</span></span></code></pre></div>
<p>Let’s identify</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong>, the individual, who would have repeated measurements.</li>
<li>The <strong>index</strong>, the time component.</li>
<li>The <strong>regularity</strong> of the time interval (index).</li>
</ol>
<p>Here it looks like the key is the student_id, which is nested within school_id and country,</p>
<p>And the index is year, so we would write the following</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html">as_tsibble</a></span>(pisa, </span>
<span id="cb10-2"><a href="#cb10-2"></a>           <span class="dt">key =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(country),</span>
<span id="cb10-3"><a href="#cb10-3"></a>           <span class="dt">index =</span> year)</span></code></pre></div>
<p>We can assess the regularity of the year like so:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw"><a href="../reference/index_summary.html">index_regular</a></span>(pisa, year)</span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="kw"><a href="../reference/index_summary.html">index_summary</a></span>(pisa, year)</span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">#&gt;    2000    2004    2009    2009    2014    2018</span></span></code></pre></div>
<p>We can now convert this into a <code>tsibble</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>pisa_ts &lt;-<span class="st"> </span><span class="kw"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html">as_tsibble</a></span>(pisa,</span>
<span id="cb12-2"><a href="#cb12-2"></a>           <span class="dt">key =</span> country,</span>
<span id="cb12-3"><a href="#cb12-3"></a>           <span class="dt">index =</span> year,</span>
<span id="cb12-4"><a href="#cb12-4"></a>           <span class="dt">regular =</span> <span class="ot">TRUE</span>)</span>
<span id="cb12-5"><a href="#cb12-5"></a></span>
<span id="cb12-6"><a href="#cb12-6"></a>pisa_ts</span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co">#&gt; # A tsibble: 433 x 11 [3Y]</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co">#&gt; # Key:       country [100]</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co">#&gt;    country  year math_mean math_min math_max read_mean read_min read_max</span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="co">#&gt;    &lt;fct&gt;   &lt;int&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb12-11"><a href="#cb12-11"></a><span class="co">#&gt;  1 ALB      2000      395.     27.4     722.      354.  59.7        640.</span></span>
<span id="cb12-12"><a href="#cb12-12"></a><span class="co">#&gt;  2 ALB      2009      377.     79.6     706.      385.  17.0        662.</span></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="co">#&gt;  3 ALB      2012      395.     62.4     688.      394.   0.0834     742.</span></span>
<span id="cb12-14"><a href="#cb12-14"></a><span class="co">#&gt;  4 ALB      2015      412.    122.      711.      405.  93.6        825.</span></span>
<span id="cb12-15"><a href="#cb12-15"></a><span class="co">#&gt;  5 ALB      2018      437.     96.5     789.      405. 152.         693.</span></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="co">#&gt;  6 ARE      2009      421.     57.8     768.      431.  48.1        772.</span></span>
<span id="cb12-17"><a href="#cb12-17"></a><span class="co">#&gt;  7 ARE      2012      434.    138.      862.      442.  75.5        785.</span></span>
<span id="cb12-18"><a href="#cb12-18"></a><span class="co">#&gt;  8 ARE      2015      427.     91.8     793.      432.  54.4        827.</span></span>
<span id="cb12-19"><a href="#cb12-19"></a><span class="co">#&gt;  9 ARE      2018      437.     87.6     865.      431.  84.0        814.</span></span>
<span id="cb12-20"><a href="#cb12-20"></a><span class="co">#&gt; 10 ARG      2000      385.     16.0     675.      417.  84.2        761.</span></span>
<span id="cb12-21"><a href="#cb12-21"></a><span class="co">#&gt; # … with 423 more rows, and 3 more variables: science_mean &lt;dbl&gt;,</span></span>
<span id="cb12-22"><a href="#cb12-22"></a><span class="co">#&gt; #   science_min &lt;dbl&gt;, science_max &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div id="conclusion" class="section level1">
<h1 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h1>
<p>This idea of longitudinal data is core to brolgar. Understanding what longitudinal data is, and how this can be linked to a time series representation of data helps us understand our data structure, and gives us access to more flexible tools. Other vignettes in the package will further show why the time series <code>tsibble</code> is useful.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#defining-longitudinal-data-as-a-tsibble">Defining longitudinal data as a <code>tsibble</code></a><ul class="nav nav-pills nav-stacked">
<li><a href="#converting-your-longitudinal-data-to-a-time-series">Converting your longitudinal data to a time series</a></li>
      </ul>
</li>
      <li><a href="#example-data-wages">example data: wages</a></li>
      <li><a href="#example-heights-data">example: heights data</a></li>
      <li><a href="#example-gapminder">example: gapminder</a></li>
      <li><a href="#example-pisa-data">example: PISA data</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Nicholas Tierney, Di Cook, Tania Prvan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '48bc42eefc5234a6463c3b99e53dfda1',
    indexName: 'brolgar',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
