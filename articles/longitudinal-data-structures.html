<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="brolgar">
<title>Longitudinal Data Structures • brolgar</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Longitudinal Data Structures">
<meta property="og:description" content="brolgar">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">brolgar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/getting-started.html">Getting Started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/visualisation-gallery.html">Gallery</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/longitudinal-data-structures.html">Data Structures</a>
    <a class="dropdown-item" href="../articles/exploratory-modelling.html">Exploratory Modelling</a>
    <a class="dropdown-item" href="../articles/finding-features.html">Finding Features</a>
    <a class="dropdown-item" href="../articles/id-interesting-obs.html">Identify Interesting Observations</a>
    <a class="dropdown-item" href="../articles/mixed-effects-models.html">Exploring Mixed Effects Models</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/njtierney/brolgar/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Longitudinal Data Structures</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/njtierney/brolgar/blob/HEAD/vignettes/longitudinal-data-structures.Rmd" class="external-link"><code>vignettes/longitudinal-data-structures.Rmd</code></a></small>
      <div class="d-none name"><code>longitudinal-data-structures.Rmd</code></div>
    </div>

    
    
<p>There are many ways to describe longitudinal data - from panel data,
cross-sectional data, and time series. We define longitudinal data
as:</p>
<blockquote>
<p>Information from the same individuals, recorded at multiple points in
time.</p>
</blockquote>
<p>To explore and model longitudinal data, It is important to understand
what variables represent the individual components, and the time
components, and how these identify an individual moving through time.
Identifying the individual and time components can sometimes be a
challenge, so this vignette walks through how to do this.</p>
<div class="section level2">
<h2 id="defining-longitudinal-data-as-a-tsibble">Defining longitudinal data as a <code>tsibble</code><a class="anchor" aria-label="anchor" href="#defining-longitudinal-data-as-a-tsibble"></a>
</h2>
<p>The tools and workflows in <code>brolgar</code> are designed to work
with a special tidy time series data frame called a
<code>tsibble</code>. We can define our longitudinal data in terms of a
time series to gain access to some really useful tools. To do so, we
need to identify three components:</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong> variable in your data is the
<strong>identifier</strong> of your individual.</li>
<li>The <strong>index</strong> variable is the <strong>time</strong>
component of your data.</li>
<li>The <strong>regularity</strong> of the time interval (index).
Longitudinal data typically has irregular time periods between
measurements, but can have regular measurements.</li>
</ol>
<p>Together, time <strong>index</strong> and <strong>key</strong>
uniquely identify an observation with repeated measurements</p>
<p>The term <code>key</code> is used a lot in brolgar, so it is an
important idea to internalise:</p>
<blockquote>
<p><strong>The key is the identifier of your individuals or
series</strong></p>
</blockquote>
<p>Why care about defining longitudinal data as a time series? Once we
account for this time series structure inherent in longitudinal data, we
gain access to a suite of nice tools that simplify and accelerate how we
work with time series data.</p>
<p><code>brolgar</code> is built on top of the powerful <a href="https://tsibble.tidyverts.org/" class="external-link"><code>tsibble</code></a> package
by <a href="https://earo.me/" class="external-link">Earo Wang</a>, if you would like to learn
more, see the <a href="https://tsibble.tidyverts.org/" class="external-link">official package
documentation</a> or read <a href="https://arxiv.org/abs/1901.10257" class="external-link">the
paper</a>.</p>
<div class="section level3">
<h3 id="converting-your-longitudinal-data-to-a-time-series">Converting your longitudinal data to a time series<a class="anchor" aria-label="anchor" href="#converting-your-longitudinal-data-to-a-time-series"></a>
</h3>
<p>To convert longitudinal data into a “<strong>t</strong>ime
<strong>s</strong>eries tibble”, a <a href="https://tsibble.tidyverts.org/" class="external-link"><code>tsibble</code></a>, we need
to consider which variables identify:</p>
<ol style="list-style-type: decimal">
<li>The individual, who would have repeated measurements. This is the
<strong>key</strong>
</li>
<li>The time component, this is the <strong>index</strong> .</li>
<li>The <strong>regularity</strong> of the time interval (index).</li>
</ol>
<p>Together, time <strong>index</strong> and <strong>key</strong>
uniquely identify an observation with repeated measurements</p>
<p>The vignette now walks through some examples of converting
longitudinal data into a <code>tsibble</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-data-wages">example data: wages<a class="anchor" aria-label="anchor" href="#example-data-wages"></a>
</h2>
<p>Let’s look at the <strong>wages</strong> data analysed in Singer
&amp; Willett (2003). This data contains measurements on hourly wages by
years in the workforce, with education and race as covariates. The
population measured was male high-school dropouts, aged between 14 and
17 years when first measured. Below is the first 10 rows of the
data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/njtierney/brolgar" class="external-link">brolgar</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="va">wages</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="4%">
<col width="12%">
<col width="8%">
<col width="5%">
<col width="17%">
<col width="8%">
<col width="12%">
<col width="14%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="right">id</th>
<th align="right">ln_wages</th>
<th align="right">xp</th>
<th align="right">ged</th>
<th align="right">xp_since_ged</th>
<th align="right">black</th>
<th align="right">hispanic</th>
<th align="right">high_grade</th>
<th align="right">unemploy_rate</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">31</td>
<td align="right">1.491</td>
<td align="right">0.015</td>
<td align="right">1</td>
<td align="right">0.015</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">3.21</td>
</tr>
<tr class="even">
<td align="right">31</td>
<td align="right">1.433</td>
<td align="right">0.715</td>
<td align="right">1</td>
<td align="right">0.715</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">3.21</td>
</tr>
<tr class="odd">
<td align="right">31</td>
<td align="right">1.469</td>
<td align="right">1.734</td>
<td align="right">1</td>
<td align="right">1.734</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">3.21</td>
</tr>
<tr class="even">
<td align="right">31</td>
<td align="right">1.749</td>
<td align="right">2.773</td>
<td align="right">1</td>
<td align="right">2.773</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">3.30</td>
</tr>
<tr class="odd">
<td align="right">31</td>
<td align="right">1.931</td>
<td align="right">3.927</td>
<td align="right">1</td>
<td align="right">3.927</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">2.89</td>
</tr>
<tr class="even">
<td align="right">31</td>
<td align="right">1.709</td>
<td align="right">4.946</td>
<td align="right">1</td>
<td align="right">4.946</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">2.49</td>
</tr>
<tr class="odd">
<td align="right">31</td>
<td align="right">2.086</td>
<td align="right">5.965</td>
<td align="right">1</td>
<td align="right">5.965</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">2.60</td>
</tr>
<tr class="even">
<td align="right">31</td>
<td align="right">2.129</td>
<td align="right">6.984</td>
<td align="right">1</td>
<td align="right">6.984</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">4.80</td>
</tr>
<tr class="odd">
<td align="right">36</td>
<td align="right">1.982</td>
<td align="right">0.315</td>
<td align="right">1</td>
<td align="right">0.315</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">9</td>
<td align="right">4.89</td>
</tr>
<tr class="even">
<td align="right">36</td>
<td align="right">1.798</td>
<td align="right">0.983</td>
<td align="right">1</td>
<td align="right">0.983</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">9</td>
<td align="right">7.40</td>
</tr>
</tbody>
</table>
<p>To create a <code>tsibble</code> of the data we ask, “which variables
identify…”:</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong>, the individual, who would have repeated
measurements.</li>
<li>The <strong>index</strong>, the time component.</li>
<li>The <strong>regularity</strong> of the time interval (index).</li>
</ol>
<p>Together, time <strong>index</strong> and <strong>key</strong>
uniquely identify an observation with repeated measurements</p>
<p>From this, we can say that:</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong> is the variable <code>id</code> - the
subject id, from 1-888.</li>
<li>The <strong>index</strong> is the variable <code>xp</code> the
experience in years an individual has.</li>
<li>The data is <strong>irregular</strong> since the experience is a
fraction of year that is not an integer.</li>
</ol>
<p>We can use this information to create a <code>tsibble</code> of this
data using <code>as_tsibble</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tsibble.tidyverts.org" class="external-link">tsibble</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html" class="external-link">as_tsibble</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wages</span>,</span>
<span>           key <span class="op">=</span> <span class="va">id</span>,</span>
<span>           index <span class="op">=</span> <span class="va">xp</span>,</span>
<span>           regular <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tsibble: 6,402 x 9 [!]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Key:       id [888]</span></span></span>
<span><span class="co">#&gt;       id ln_wages    xp   ged xp_since_ged black hispanic high_grade</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    31     1.49 0.015     1        0.015     0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    31     1.43 0.715     1        0.715     0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    31     1.47 1.73      1        1.73      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    31     1.75 2.77      1        2.77      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    31     1.93 3.93      1        3.93      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    31     1.71 4.95      1        4.95      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    31     2.09 5.96      1        5.96      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    31     2.13 6.98      1        6.98      0        1          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    36     1.98 0.315     1        0.315     0        0          9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    36     1.80 0.983     1        0.983     0        0          9</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6,392 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: unemploy_rate &lt;dbl&gt;</span></span></span></code></pre>
<p>Note that <code>regular = FALSE</code>, since we have an
<code>irregular</code> time series</p>
<p>Note the following information printed at the top of
<code>wages</code></p>
<pre><code><span><span class="co"># A tsibble: 6,402 x 9 [!]</span></span>
<span><span class="co"># Key:       id [888]</span></span>
<span><span class="va">...</span></span></code></pre>
<p>This says:</p>
<ul>
<li>We have 6402 rows,</li>
<li>with 9 columns.</li>
</ul>
<p>The <code>!</code> at the top means that there is no regular spacing
between series</p>
<p>The “key” variable is then listed - <code>id</code>, of which there
888.</p>
</div>
<div class="section level2">
<h2 id="example-heights-data">example: heights data<a class="anchor" aria-label="anchor" href="#example-heights-data"></a>
</h2>
<p>The heights data is a little simpler than the wages data, and
contains the average male heights in 144 countries from 1810-1989, with
a smaller number of countries from 1500-1800.</p>
<p>It contains four variables:</p>
<ul>
<li>country</li>
<li>continent</li>
<li>year</li>
<li>height_cm</li>
</ul>
<p>To create a <code>tsibble</code> of the data we ask, “which variables
identify…”:</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong>, the individual, who would have repeated
measurements.</li>
<li>The <strong>index</strong>, the time component.</li>
<li>The <strong>regularity</strong> of the time interval (index).</li>
</ol>
<p>In this case:</p>
<ul>
<li>The individual is not a person, but a country</li>
<li>The time is year</li>
<li>The year is not regular because there are not measurements at a
fixed year point.</li>
</ul>
<p>This data is already a <code>tsibble</code> object, we can create a
<code>tsibble</code> with the following code:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html" class="external-link">as_tsibble</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">heights</span>,</span>
<span>           key <span class="op">=</span> <span class="va">country</span>,</span>
<span>           index <span class="op">=</span> <span class="va">year</span>,</span>
<span>           regular <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tsibble: 1,490 x 4 [!]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Key:       country [144]</span></span></span>
<span><span class="co">#&gt;    country     continent  year height_cm</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>870      168.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>880      166.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>930      167.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>990      167.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Afghanistan Asia       <span style="text-decoration: underline;">2</span>000      161.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Albania     Europe     <span style="text-decoration: underline;">1</span>880      170.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Albania     Europe     <span style="text-decoration: underline;">1</span>890      170.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Albania     Europe     <span style="text-decoration: underline;">1</span>900      169.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Albania     Europe     <span style="text-decoration: underline;">2</span>000      168.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Algeria     Africa     <span style="text-decoration: underline;">1</span>910      169.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,480 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-gapminder">example: gapminder<a class="anchor" aria-label="anchor" href="#example-gapminder"></a>
</h2>
<p>The gapminder R package contains a dataset of a subset of the
gapminder study (link). This contains data on life expectancy, GDP per
capita, and population by country.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jennybc/gapminder" class="external-link">gapminder</a></span><span class="op">)</span></span>
<span><span class="va">gapminder</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,704 × 6</span></span></span>
<span><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>952    28.8  8<span style="text-decoration: underline;">425</span>333      779.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>957    30.3  9<span style="text-decoration: underline;">240</span>934      821.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>962    32.0 10<span style="text-decoration: underline;">267</span>083      853.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>967    34.0 11<span style="text-decoration: underline;">537</span>966      836.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>972    36.1 13<span style="text-decoration: underline;">079</span>460      740.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>977    38.4 14<span style="text-decoration: underline;">880</span>372      786.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>982    39.9 12<span style="text-decoration: underline;">881</span>816      978.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>987    40.8 13<span style="text-decoration: underline;">867</span>957      852.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>992    41.7 16<span style="text-decoration: underline;">317</span>921      649.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>997    41.8 22<span style="text-decoration: underline;">227</span>415      635.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,694 more rows</span></span></span></code></pre></div>
<p>Let’s identify</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong>, the individual, who would have repeated
measurements.</li>
<li>The <strong>index</strong>, the time component.</li>
<li>The <strong>regularity</strong> of the time interval (index).</li>
</ol>
<p>This is in fact very similar to the <code>heights</code> dataset:</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong> is the country</li>
<li>The <strong>index</strong> is the year</li>
</ol>
<p>To identify if the year is regular, we can do a bit of data
exploration using <code><a href="../reference/index_summary.html">index_summary()</a></code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/index_summary.html">index_summary</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;    1952    1966    1980    1980    1993    2007</span></span></code></pre></div>
<p>This shows us that the year is every five - so now we know that this
is a regular longitudinal dataset, and can be encoded like so:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html" class="external-link">as_tsibble</a></span><span class="op">(</span><span class="va">gapminder</span>,</span>
<span>           key <span class="op">=</span> <span class="va">country</span>,</span>
<span>           index <span class="op">=</span> <span class="va">year</span>,</span>
<span>           regular <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tsibble: 1,704 x 6 [5Y]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Key:       country [142]</span></span></span>
<span><span class="co">#&gt;    country     continent  year lifeExp      pop gdpPercap</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>952    28.8  8<span style="text-decoration: underline;">425</span>333      779.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>957    30.3  9<span style="text-decoration: underline;">240</span>934      821.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>962    32.0 10<span style="text-decoration: underline;">267</span>083      853.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>967    34.0 11<span style="text-decoration: underline;">537</span>966      836.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>972    36.1 13<span style="text-decoration: underline;">079</span>460      740.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>977    38.4 14<span style="text-decoration: underline;">880</span>372      786.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>982    39.9 12<span style="text-decoration: underline;">881</span>816      978.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>987    40.8 13<span style="text-decoration: underline;">867</span>957      852.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>992    41.7 16<span style="text-decoration: underline;">317</span>921      649.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Afghanistan Asia       <span style="text-decoration: underline;">1</span>997    41.8 22<span style="text-decoration: underline;">227</span>415      635.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,694 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-pisa-data">example: PISA data<a class="anchor" aria-label="anchor" href="#example-pisa-data"></a>
</h2>
<p>The PISA study measures school students around the world on a series
of math, reading, and science scores. A subset of the data looks like
so:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pisa</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 433 × 11</span></span></span>
<span><span class="co">#&gt;    country  year math_mean math_min math_max read_mean read_min read_max</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ALB      <span style="text-decoration: underline;">2</span>000      395.     27.4     722.      354.  59.7        640.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ALB      <span style="text-decoration: underline;">2</span>009      377.     79.6     706.      385.  17.0        662.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ALB      <span style="text-decoration: underline;">2</span>012      395.     62.4     688.      394.   0.083<span style="text-decoration: underline;">4</span>     742.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ALB      <span style="text-decoration: underline;">2</span>015      412.    122.      711.      405.  93.6        825.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ALB      <span style="text-decoration: underline;">2</span>018      437.     96.5     789.      405. 152.         693.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ARE      <span style="text-decoration: underline;">2</span>009      421.     57.8     768.      431.  48.1        772.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ARE      <span style="text-decoration: underline;">2</span>012      434.    138.      862.      442.  75.5        785.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ARE      <span style="text-decoration: underline;">2</span>015      427.     91.8     793.      432.  54.4        827.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ARE      <span style="text-decoration: underline;">2</span>018      437.     87.6     865.      431.  84.0        814.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ARG      <span style="text-decoration: underline;">2</span>000      385.     16.0     675.      417.  84.2        761.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 423 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: science_mean &lt;dbl&gt;, science_min &lt;dbl&gt;, science_max &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Let’s identify</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong>, the individual, who would have repeated
measurements.</li>
<li>The <strong>index</strong>, the time component.</li>
<li>The <strong>regularity</strong> of the time interval (index).</li>
</ol>
<p>Here it looks like the key is the student_id, which is nested within
school_id and country,</p>
<p>And the index is year, so we would write the following</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html" class="external-link">as_tsibble</a></span><span class="op">(</span><span class="va">pisa</span>, </span>
<span>           key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span>,</span>
<span>           index <span class="op">=</span> <span class="va">year</span><span class="op">)</span></span></code></pre></div>
<p>We can assess the regularity of the year like so:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/index_summary.html">index_regular</a></span><span class="op">(</span><span class="va">pisa</span>, <span class="va">year</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="../reference/index_summary.html">index_summary</a></span><span class="op">(</span><span class="va">pisa</span>, <span class="va">year</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;    2000    2004    2009    2009    2014    2018</span></span></code></pre></div>
<p>We can now convert this into a <code>tsibble</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pisa_ts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html" class="external-link">as_tsibble</a></span><span class="op">(</span><span class="va">pisa</span>,</span>
<span>           key <span class="op">=</span> <span class="va">country</span>,</span>
<span>           index <span class="op">=</span> <span class="va">year</span>,</span>
<span>           regular <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pisa_ts</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tsibble: 433 x 11 [3Y]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Key:       country [100]</span></span></span>
<span><span class="co">#&gt;    country  year math_mean math_min math_max read_mean read_min read_max</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ALB      <span style="text-decoration: underline;">2</span>000      395.     27.4     722.      354.  59.7        640.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ALB      <span style="text-decoration: underline;">2</span>009      377.     79.6     706.      385.  17.0        662.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ALB      <span style="text-decoration: underline;">2</span>012      395.     62.4     688.      394.   0.083<span style="text-decoration: underline;">4</span>     742.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ALB      <span style="text-decoration: underline;">2</span>015      412.    122.      711.      405.  93.6        825.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ALB      <span style="text-decoration: underline;">2</span>018      437.     96.5     789.      405. 152.         693.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ARE      <span style="text-decoration: underline;">2</span>009      421.     57.8     768.      431.  48.1        772.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ARE      <span style="text-decoration: underline;">2</span>012      434.    138.      862.      442.  75.5        785.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ARE      <span style="text-decoration: underline;">2</span>015      427.     91.8     793.      432.  54.4        827.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ARE      <span style="text-decoration: underline;">2</span>018      437.     87.6     865.      431.  84.0        814.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ARG      <span style="text-decoration: underline;">2</span>000      385.     16.0     675.      417.  84.2        761.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 423 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: science_mean &lt;dbl&gt;, science_min &lt;dbl&gt;, science_max &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>This idea of longitudinal data is core to brolgar. Understanding what
longitudinal data is, and how this can be linked to a time series
representation of data helps us understand our data structure, and gives
us access to more flexible tools. Other vignettes in the package will
further show why the time series <code>tsibble</code> is useful.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicholas Tierney, Di Cook, Tania Prvan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
