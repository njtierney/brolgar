<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content='Provides a framework of tools to summarise, visualise, and explore longitudinal data. It builds upon the tidy time series data frames used in the tsibble package, and is designed to integrate within the tidyverse, and tidyverts (for time series) ecosystems. The methods implemented include calculating features for understanding longitudinal data, including calculating summary statistics such as quantiles, medians, and numeric ranges, sampling individual series, identifying individual series representative of a group, and extending the facet system in ggplot2 to facilitate exploration of samples of data. These methods are fully described in the paper "brolgar: An R package to Browse Over Longitudinal Data Graphically and Analytically in R", Nicholas Tierney, Dianne Cook, Tania Prvan (2020) &lt;arXiv:2012.01619&gt;.'>
<title>Browse Over Longitudinal Data Graphically and Analytically in R • brolgar</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Browse Over Longitudinal Data Graphically and Analytically in R">
<meta property="og:description" content='Provides a framework of tools to summarise, visualise, and explore longitudinal data. It builds upon the tidy time series data frames used in the tsibble package, and is designed to integrate within the tidyverse, and tidyverts (for time series) ecosystems. The methods implemented include calculating features for understanding longitudinal data, including calculating summary statistics such as quantiles, medians, and numeric ranges, sampling individual series, identifying individual series representative of a group, and extending the facet system in ggplot2 to facilitate exploration of samples of data. These methods are fully described in the paper "brolgar: An R package to Browse Over Longitudinal Data Graphically and Analytically in R", Nicholas Tierney, Dianne Cook, Tania Prvan (2020) &lt;arXiv:2012.01619&gt;.'>
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">brolgar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/getting-started.html">Getting Started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="articles/visualisation-gallery.html">Gallery</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/longitudinal-data-structures.html">Data Structures</a>
    <a class="dropdown-item" href="articles/exploratory-modelling.html">Exploratory Modelling</a>
    <a class="dropdown-item" href="articles/finding-features.html">Finding Features</a>
    <a class="dropdown-item" href="articles/id-interesting-obs.html">Identify Interesting Observations</a>
    <a class="dropdown-item" href="articles/mixed-effects-models.html">Exploring Mixed Effects Models</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/njtierney/brolgar/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="brolgar">brolgar<a class="anchor" aria-label="anchor" href="#brolgar"></a>
</h1></div>
<!-- badges: start -->

<!-- badges: end -->
<p><code>brolgar</code> helps you <strong>br</strong>owse <strong>o</strong>ver <strong>l</strong>ongitudinal <strong>d</strong>ata <strong>g</strong>raphically and <strong>a</strong>nalytically in <strong>R</strong>, by providing tools to:</p>
<ul>
<li>Efficiently explore raw longitudinal data</li>
<li>Calculate features (summaries) for individuals</li>
<li>Evaluate diagnostics of statistical models</li>
</ul>
<p>This helps you go from the “plate of spaghetti” plot on the left, to “interesting observations” plot on the right.</p>
<p><img src="reference/figures/README-show-spaghetti-1.png" width="75%" style="display: block; margin: auto;"></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"njtierney/brolgar"</span><span class="op">)</span></span></code></pre></div>
<p>Or from the <a href="https://njtierney.r-universe.dev" class="external-link">R Universe</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Enable this universe</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    njtierney <span class="op">=</span> <span class="st">'https://njtierney.r-universe.dev'</span>,</span>
<span>    CRAN <span class="op">=</span> <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># Install some packages</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'brolgar'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="using-brolgar-we-need-to-talk-about-data">Using <code>brolgar</code>: We need to talk about data<a class="anchor" aria-label="anchor" href="#using-brolgar-we-need-to-talk-about-data"></a>
</h1>
<p>There are many ways to describe longitudinal data - from panel data, cross-sectional data, and time series. We define longitudinal data as:</p>
<blockquote>
<p>individuals repeatedly measured through time.</p>
</blockquote>
<p>The tools and workflows in <code>brolgar</code> are designed to work with a special tidy time series data frame called a <code>tsibble</code>. We can define our longitudinal data in terms of a time series to gain access to some really useful tools. To do so, we need to identify three components:</p>
<ol style="list-style-type: decimal">
<li>The <strong>key</strong> variable in your data is the <strong>identifier</strong> of your individual.</li>
<li>The <strong>index</strong> variable is the <strong>time</strong> component of your data.</li>
<li>The <strong>regularity</strong> of the time interval (index). Longitudinal data typically has irregular time periods between measurements, but can have regular measurements.</li>
</ol>
<p>Together, time <strong>index</strong> and <strong>key</strong> uniquely identify an observation.</p>
<p>The term <code>key</code> is used a lot in brolgar, so it is an important idea to internalise:</p>
<blockquote>
<p><strong>The key is the identifier of your individuals or series</strong></p>
</blockquote>
<p>Identifying the key, index, and regularity of the data can be a challenge. You can learn more about specifying this in the vignette, <a href="https://brolgar.njtierney.com/articles/longitudinal-data-structures.html">“Longitudinal Data Structures”</a>.</p>
<div class="section level2">
<h2 id="the-wages-data">The wages data<a class="anchor" aria-label="anchor" href="#the-wages-data"></a>
</h2>
<p>The <code>wages</code> data is an example dataset provided with brolgar. It looks like this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span></span>
<span><span class="co">#&gt; # A tsibble: 6,402 x 9 [!]</span></span>
<span><span class="co">#&gt; # Key:       id [888]</span></span>
<span><span class="co">#&gt;       id ln_wages    xp   ged xp_since_ged black hispanic high_grade</span></span>
<span><span class="co">#&gt;    &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;        &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1    31     1.49 0.015     1        0.015     0        1          8</span></span>
<span><span class="co">#&gt;  2    31     1.43 0.715     1        0.715     0        1          8</span></span>
<span><span class="co">#&gt;  3    31     1.47 1.73      1        1.73      0        1          8</span></span>
<span><span class="co">#&gt;  4    31     1.75 2.77      1        2.77      0        1          8</span></span>
<span><span class="co">#&gt;  5    31     1.93 3.93      1        3.93      0        1          8</span></span>
<span><span class="co">#&gt;  6    31     1.71 4.95      1        4.95      0        1          8</span></span>
<span><span class="co">#&gt;  7    31     2.09 5.96      1        5.96      0        1          8</span></span>
<span><span class="co">#&gt;  8    31     2.13 6.98      1        6.98      0        1          8</span></span>
<span><span class="co">#&gt;  9    36     1.98 0.315     1        0.315     0        0          9</span></span>
<span><span class="co">#&gt; 10    36     1.80 0.983     1        0.983     0        0          9</span></span>
<span><span class="co">#&gt; # ℹ 6,392 more rows</span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: unemploy_rate &lt;dbl&gt;</span></span></code></pre></div>
<p>And under the hood, it was created with the following setup:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html" class="external-link">as_tsibble</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wages</span>,</span>
<span>                    key <span class="op">=</span> <span class="va">id</span>,</span>
<span>                    index <span class="op">=</span> <span class="va">xp</span>,</span>
<span>                    regular <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Here <code><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html" class="external-link">as_tsibble()</a></code> takes wages, and a <code>key</code>, and <code>index</code>, and we state the <code>regular = FALSE</code> (since there are not regular time periods between measurements). This turns the data into a <code>tsibble</code> object - a powerful data abstraction made available in the <a href="https://tsibble.tidyverts.org/" class="external-link"><code>tsibble</code></a> package by <a href="https://earo.me/" class="external-link">Earo Wang</a>, if you would like to learn more about <code>tsibble</code>, see the <a href="https://tsibble.tidyverts.org/" class="external-link">official package documentation</a> or read <a href="https://pdf.earo.me/tsibble.pdf" class="external-link">the paper</a>.</p>
</div>
</div>
<div class="section level1">
<h1 id="efficiently-exploring-longitudinal-data">Efficiently exploring longitudinal data<a class="anchor" aria-label="anchor" href="#efficiently-exploring-longitudinal-data"></a>
</h1>
<p>Exploring longitudinal data can be challenging when there are many individuals. It is difficult to look at all of them!</p>
<p>You often get a “plate of spaghetti” plot, with many lines plotted on top of each other. You can avoid the spaghetti by looking at a random subset of the data using tools in <code>brolgar</code>.</p>
<div class="section level2">
<h2 id="sample_n_keys">
<code>sample_n_keys()</code><a class="anchor" aria-label="anchor" href="#sample_n_keys"></a>
</h2>
<p>In <code>dplyr</code>, you can use <code>sample_n()</code> to sample <code>n</code> observations, or <code>sample_frac()</code> to look at a <code>frac</code>tion of observations.</p>
<p><code>brolgar</code> builds on this providing <code><a href="reference/sample-n-frac-keys.html">sample_n_keys()</a></code> and <code><a href="reference/sample-n-frac-keys.html">sample_frac_keys()</a></code>. This allows you to take a random sample of <code>n</code> keys using <code><a href="reference/sample-n-frac-keys.html">sample_n_keys()</a></code>. For example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">-</span><span class="fl">7</span><span class="op">-</span><span class="fl">15</span><span class="op">-</span><span class="fl">1300</span><span class="op">)</span></span>
<span><span class="va">wages</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/sample-n-frac-keys.html">sample_n_keys</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>             y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>             group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-plot-sample-n-keys-1.png" width="75%" style="display: block; margin: auto;"></p>
<p>And what if you want to create many of these plots?</p>
</div>
<div class="section level2">
<h2 id="clever-facets-facet_sample">Clever facets: <code>facet_sample()</code>
<a class="anchor" aria-label="anchor" href="#clever-facets-facet_sample"></a>
</h2>
<p><code><a href="reference/facet_sample.html">facet_sample()</a></code> allows you to specify the number of keys per facet, and the number of facets with <code>n_per_facet</code> and <code>n_facets</code>.</p>
<p>By default, it splits the data into 12 facets with 5 per facet:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">-</span><span class="fl">07</span><span class="op">-</span><span class="fl">23</span><span class="op">-</span><span class="fl">1937</span><span class="op">)</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">wages</span>,</span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>           y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>           group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/facet_sample.html">facet_sample</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-facet-sample-1.png" width="75%" style="display: block; margin: auto;"></p>
<p>Under the hood, <code><a href="reference/facet_sample.html">facet_sample()</a></code> is powered by <code><a href="reference/sample-n-frac-keys.html">sample_n_keys()</a></code> and <code><a href="reference/stratify_keys.html">stratify_keys()</a></code>.</p>
<p>You can see more facets (e.g., <code><a href="reference/facet_strata.html">facet_strata()</a></code>) and data visualisations you can make in brolgar in the <a href="https://brolgar.njtierney.com/articles/visualisation-gallery.html">Visualisation Gallery</a>.</p>
</div>
<div class="section level2">
<h2 id="finding-features-in-longitudinal-data">Finding features in longitudinal data<a class="anchor" aria-label="anchor" href="#finding-features-in-longitudinal-data"></a>
</h2>
<p>Sometimes you want to know what the range or a summary of a variable for each individual. We call these summaries <code>features</code> of the data, and they can be extracted using the <code>features</code> function, from <a href="https://fabletools.tidyverts.org/" class="external-link"><code>fabletools</code></a>.</p>
<p>For example, if you want to answer the question “What is the summary of wages for each individual?”. You can use <code><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features()</a></code> to find the five number summary (min, max, q1, q3, and median) of <code>ln_wages</code> with <code>feat_five_num</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>,</span>
<span>           <span class="va">feat_five_num</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 888 × 6</span></span>
<span><span class="co">#&gt;       id   min   q25   med   q75   max</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1    31 1.43   1.48  1.73  2.02  2.13</span></span>
<span><span class="co">#&gt;  2    36 1.80   1.97  2.32  2.59  2.93</span></span>
<span><span class="co">#&gt;  3    53 1.54   1.58  1.71  1.89  3.24</span></span>
<span><span class="co">#&gt;  4   122 0.763  2.10  2.19  2.46  2.92</span></span>
<span><span class="co">#&gt;  5   134 2.00   2.28  2.36  2.79  2.93</span></span>
<span><span class="co">#&gt;  6   145 1.48   1.58  1.77  1.89  2.04</span></span>
<span><span class="co">#&gt;  7   155 1.54   1.83  2.22  2.44  2.64</span></span>
<span><span class="co">#&gt;  8   173 1.56   1.68  2.00  2.05  2.34</span></span>
<span><span class="co">#&gt;  9   206 2.03   2.07  2.30  2.45  2.48</span></span>
<span><span class="co">#&gt; 10   207 1.58   1.87  2.15  2.26  2.66</span></span>
<span><span class="co">#&gt; # ℹ 878 more rows</span></span></code></pre></div>
<p>This returns the id, and then the features.</p>
<p>There are many features in brolgar - these features all begin with <code>feat_</code>. You can, for example, find those whose <code>ln_wages</code> values only increase or decrease with <code>feat_monotonic</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">feat_monotonic</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 888 × 5</span></span>
<span><span class="co">#&gt;       id increase decrease unvary monotonic</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;lgl&gt;    &lt;lgl&gt;    &lt;lgl&gt;  &lt;lgl&gt;    </span></span>
<span><span class="co">#&gt;  1    31 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt;  2    36 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt;  3    53 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt;  4   122 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt;  5   134 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt;  6   145 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt;  7   155 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt;  8   173 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt;  9   206 TRUE     FALSE    FALSE  TRUE     </span></span>
<span><span class="co">#&gt; 10   207 FALSE    FALSE    FALSE  FALSE    </span></span>
<span><span class="co">#&gt; # ℹ 878 more rows</span></span></code></pre></div>
<p>You can read more about creating and using features in the <a href="https://brolgar.njtierney.com/articles/finding-features.html">Finding Features</a> vignette. You can also see other features for time series in the <a href="https://feasts.tidyverts.org" class="external-link"><code>feasts</code> package</a>.</p>
</div>
<div class="section level2">
<h2 id="linking-individuals-back-to-the-data">Linking individuals back to the data<a class="anchor" aria-label="anchor" href="#linking-individuals-back-to-the-data"></a>
</h2>
<p>Once you have created these features, you can join them back to the data with a <code>left_join</code>, like so:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">feat_monotonic</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">wages</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">xp</span>,</span>
<span>             y <span class="op">=</span> <span class="va">ln_wages</span>,</span>
<span>             group <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">gghighlight</span><span class="op">(</span><span class="va">increase</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Tried to calculate with group_by(), but the calculation failed.</span></span>
<span><span class="co">#&gt; Falling back to ungrouped filter operation...</span></span>
<span><span class="co">#&gt; label_key: id</span></span>
<span><span class="co">#&gt; Too many data series, skip labeling</span></span></code></pre></div>
<p><img src="reference/figures/README-features-left-join-1.png" width="75%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level1">
<h1 id="other-helper-functions">Other helper functions<a class="anchor" aria-label="anchor" href="#other-helper-functions"></a>
</h1>
<div class="section level2">
<h2 id="n_obs">
<code>n_obs()</code><a class="anchor" aria-label="anchor" href="#n_obs"></a>
</h2>
<p>Return the number of observations total with <code><a href="reference/n_obs.html">n_obs()</a></code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/n_obs.html">n_obs</a></span><span class="op">(</span><span class="va">wages</span><span class="op">)</span></span>
<span><span class="co">#&gt; n_obs </span></span>
<span><span class="co">#&gt;  6402</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="n_keys">
<code>n_keys()</code><a class="anchor" aria-label="anchor" href="#n_keys"></a>
</h2>
<p>And the number of keys in the data using <code><a href="https://tsibble.tidyverts.org/reference/key-data.html" class="external-link">n_keys()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tsibble.tidyverts.org/reference/key-data.html" class="external-link">n_keys</a></span><span class="op">(</span><span class="va">wages</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 888</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="finding-the-number-of-observations-per-key">Finding the number of observations per <code>key</code>.<a class="anchor" aria-label="anchor" href="#finding-the-number-of-observations-per-key"></a>
</h2>
<p>You can also use <code><a href="reference/n_obs.html">n_obs()</a></code> inside features to return the number of observations for each key:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">n_obs</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 888 × 2</span></span>
<span><span class="co">#&gt;       id n_obs</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1    31     8</span></span>
<span><span class="co">#&gt;  2    36    10</span></span>
<span><span class="co">#&gt;  3    53     8</span></span>
<span><span class="co">#&gt;  4   122    10</span></span>
<span><span class="co">#&gt;  5   134    12</span></span>
<span><span class="co">#&gt;  6   145     9</span></span>
<span><span class="co">#&gt;  7   155    11</span></span>
<span><span class="co">#&gt;  8   173     6</span></span>
<span><span class="co">#&gt;  9   206     3</span></span>
<span><span class="co">#&gt; 10   207    11</span></span>
<span><span class="co">#&gt; # ℹ 878 more rows</span></span></code></pre></div>
<p>This returns a dataframe, with one row per key, and the number of observations for each key.</p>
<p>This could be further summarised to get a sense of the patterns of the number of observations:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">wages</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">n_obs</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">n_obs</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-summarise-n-obs-1.png" width="75%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">wages</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://fabletools.tidyverts.org/reference/features.html" class="external-link">features</a></span><span class="op">(</span><span class="va">ln_wages</span>, <span class="va">n_obs</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;        id            n_obs       </span></span>
<span><span class="co">#&gt;  Min.   :   31   Min.   : 1.000  </span></span>
<span><span class="co">#&gt;  1st Qu.: 3332   1st Qu.: 5.000  </span></span>
<span><span class="co">#&gt;  Median : 6666   Median : 8.000  </span></span>
<span><span class="co">#&gt;  Mean   : 6343   Mean   : 7.209  </span></span>
<span><span class="co">#&gt;  3rd Qu.: 9194   3rd Qu.: 9.000  </span></span>
<span><span class="co">#&gt;  Max.   :12543   Max.   :13.000</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="further-reading">Further Reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h1>
<p><code>brolgar</code> provides other useful functions to explore your data, which you can read about in the <a href="https://brolgar.njtierney.com/articles/exploratory-modelling.html">exploratory modelling</a> and <a href="https://brolgar.njtierney.com/articles/id-interesting-obs.html">Identify Interesting Observations</a> vignettes. As a taster, here are some of the figures you can produce:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co">#&gt; Warning: Tried to calculate with group_by(), but the calculation failed.</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="co">#&gt; Falling back to ungrouped filter operation...</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="co">#&gt; label_key: id</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co">#&gt; Too many data series, skip labeling</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="co">#&gt; Warning in left_join(., wages, by = "id"): Detected an unexpected many-to-many relationship between `x` and `y`.</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co">#&gt; ℹ Row 1 of `x` matches multiple rows in `y`.</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co">#&gt; ℹ Row 1077 of `y` matches multiple rows in `x`.</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="co">#&gt; ℹ If a many-to-many relationship is expected, set `relationship =</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="co">#&gt;   "many-to-many"` to silence this warning.</span></span></code></pre></div>
<p><img src="reference/figures/README-show-wages-lg-1.png" width="75%" style="display: block; margin: auto;"></p>
</div>
<div class="section level1">
<h1 id="related-work">Related work<a class="anchor" aria-label="anchor" href="#related-work"></a>
</h1>
<p>One of the sources of inspiration for this work was the <a href="https://github.com/swihart/lasagnar" class="external-link"><code>lasangar</code> R package by Bryan Swihart</a> (and <a href="https://doi.org/10.1097%2FEDE.0b013e3181e5b06a" class="external-link">paper</a>).</p>
<p>For even more expansive time series summarisation, make sure you check out the <a href="https://github.com/tidyverts/feasts" class="external-link"><code>feasts</code> package</a> (and <a href="https://slides.mitchelloharawild.com/user2019/#1" class="external-link">talk!</a>).</p>
</div>
<div class="section level1">
<h1 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h1>
<p>Please note that the <code>brolgar</code> project is released with a <a href="https://github.com/njtierney/brolgar/blob/main/.github/CODE_OF_CONDUCT.md" class="external-link">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div class="section level1">
<h1 id="a-note-on-the-api">A Note on the API<a class="anchor" aria-label="anchor" href="#a-note-on-the-api"></a>
</h1>
<p>This version of brolgar was been forked from <a href="https://github.com/tprvan/brolgar" class="external-link">tprvan/brolgar</a>, and has undergone breaking changes to the API.</p>
</div>
<div class="section level1">
<h1 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h1>
<p>Thank you to <a href="https://blog.mitchelloharawild.com/" class="external-link">Mitchell O’Hara-Wild</a> and <a href="https://earo.me/" class="external-link">Earo Wang</a> for many useful discussions on the implementation of brolgar, as it was heavily inspired by the <a href="https://github.com/tidyverts/feasts" class="external-link"><code>feasts</code></a> package from the <a href="https://tidyverts.org/" class="external-link"><code>tidyverts</code></a>. I would also like to thank <a href="https://researchers.mq.edu.au/en/persons/tania-prvan" class="external-link">Tania Prvan</a> for her valuable early contributions to the project, as well as <a href="https://stuartlee.org/" class="external-link">Stuart Lee</a> for helpful discussions. Thanks also to <a href="https://uschilaa.github.io/" class="external-link">Ursula Laa</a> for her feedback on the package structure and documentation.</p>
<!-- These are referred to as a **longnostics**, a portmanteau of **long**itudinal and **cognostic**. These **longnostics** make it straightforward to extract subjects with certain properties to gain some insight into the data.  -->
<!-- But calculating this for individuals draws you away from your analysis, and instead you are now wrangling with a different problem: summarising key information about each individual and incorporating that back into the data.  -->
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=brolgar" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/njtierney/brolgar/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/njtierney/brolgar/issues" class="external-link">Report a bug</a></li>
<li><a href="https://github.com/njtierney/brolgar" class="external-link">Learn more</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing brolgar</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Nicholas Tierney <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/https://orcid.org/0000-0003-1460-8722" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Di Cook <br><small class="roles"> Author </small> <a href="https://orcid.org/https://orcid.org/0000-0002-3813-7155" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Tania Prvan <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://github.com/njtierney/brolgar/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/njtierney/brolgar/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://CRAN.R-project.org/package=brolgar" class="external-link"><img src="https://www.r-pkg.org/badges/version/brolgar" alt="CRAN status"></a></li>
<li><a href="https://app.codecov.io/gh/njtierney/brolgar?branch=main" class="external-link"><img src="https://codecov.io/gh/njtierney/brolgar/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nicholas Tierney, Di Cook, Tania Prvan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
